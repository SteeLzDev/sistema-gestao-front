{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40\",\r\n        outline:\r\n          \"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,8cACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\"flex flex-col gap-1.5 px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn(\"leading-none font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn(\"px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn(\"flex items-center px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,0BAA0B;QACvC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Select({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\r\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\r\n}\r\n\r\nfunction SelectGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\r\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\r\n}\r\n\r\nfunction SelectValue({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\r\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\r\n}\r\n\r\nfunction SelectTrigger({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Trigger>) {\r\n  return (\r\n    <SelectPrimitive.Trigger\r\n      data-slot=\"select-trigger\"\r\n      className={cn(\r\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SelectPrimitive.Icon asChild>\r\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\r\n      </SelectPrimitive.Icon>\r\n    </SelectPrimitive.Trigger>\r\n  )\r\n}\r\n\r\nfunction SelectContent({\r\n  className,\r\n  children,\r\n  position = \"popper\",\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        data-slot=\"select-content\"\r\n        className={cn(\r\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction SelectLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\r\n  return (\r\n    <SelectPrimitive.Label\r\n      data-slot=\"select-label\"\r\n      className={cn(\"px-2 py-1.5 text-sm font-medium\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectItem({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\r\n  return (\r\n    <SelectPrimitive.Item\r\n      data-slot=\"select-item\"\r\n      className={cn(\r\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\r\n        <SelectPrimitive.ItemIndicator>\r\n          <CheckIcon className=\"size-4\" />\r\n        </SelectPrimitive.ItemIndicator>\r\n      </span>\r\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    </SelectPrimitive.Item>\r\n  )\r\n}\r\n\r\nfunction SelectSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\r\n  return (\r\n    <SelectPrimitive.Separator\r\n      data-slot=\"select-separator\"\r\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectScrollUpButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollUpButton\r\n      data-slot=\"select-scroll-up-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronUpIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollUpButton>\r\n  )\r\n}\r\n\r\nfunction SelectScrollDownButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollDownButton\r\n      data-slot=\"select-scroll-down-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronDownIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollDownButton>\r\n  )\r\n}\r\n\r\nexport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectScrollDownButton,\r\n  SelectScrollUpButton,\r\n  SelectSeparator,\r\n  SelectTrigger,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/BackButton.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ArrowLeft } from \"lucide-react\"\r\n\r\ninterface BackButtonProps {\r\n  to?: string\r\n  label?: string\r\n  className?: string\r\n}\r\n\r\nexport const BackButton = ({\r\n  to = \"/dashboard\",\r\n  label = \"Voltar para Dashboard\",\r\n  className = \"\",\r\n}: BackButtonProps) => {\r\n  const router = useRouter()\r\n\r\n  const handleClick = () => {\r\n    router.push(to)\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      variant=\"outline\"\r\n      size=\"sm\"\r\n      onClick={handleClick}\r\n      className={`flex items-center gap-1 ${className}`}\r\n    >\r\n      <ArrowLeft className=\"h-4 w-4\" />\r\n      <span>{label}</span>\r\n    </Button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAYO,MAAM,aAAa,CAAC,EACzB,KAAK,YAAY,EACjB,QAAQ,uBAAuB,EAC/B,YAAY,EAAE,EACE;IAChB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,cAAc;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,2HAAA,CAAA,SAAM;QACL,SAAQ;QACR,MAAK;QACL,SAAS;QACT,WAAW,CAAC,wBAAwB,EAAE,WAAW;;0BAEjD,8OAAC,gNAAA,CAAA,YAAS;gBAAC,WAAU;;;;;;0BACrB,8OAAC;0BAAM;;;;;;;;;;;;AAGb","debugId":null}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/services/usuarioService.ts"],"sourcesContent":["import apiClient from \"./apiClient\"\r\n\r\n// Interfaces para tipagem\r\nexport interface Usuario {\r\n  id: number\r\n  nome: string\r\n  username: string\r\n  email: string // Obrigatório\r\n  cargo: string\r\n  perfil: string\r\n  status: string\r\n  ativo?: boolean\r\n  permissoes?: string[]\r\n}\r\n\r\nexport interface NovoUsuario {\r\n  nome: string\r\n  username: string\r\n  email: string // Obrigatório\r\n  senha: string\r\n  cargo: string\r\n  perfil: string\r\n  status: string\r\n}\r\n\r\nexport interface EditarUsuario {\r\n  nome?: string\r\n  email?: string\r\n  senha?: string\r\n  cargo?: string\r\n  perfil?: string\r\n  status?: string\r\n  username?: string\r\n  permissoes?: string[]\r\n}\r\n\r\n// Não adicionar o prefixo /api/ pois já está incluído na URL base\r\nconst usuarioService = {\r\n  listarUsuarios: async () => {\r\n    try {\r\n      const response = await apiClient.get(\"/usuarios\")\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(\"Erro ao listar usuários:\", error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  buscarUsuario: async (id: number) => {\r\n    try {\r\n      const response = await apiClient.get(`/usuarios/${id}`)\r\n\r\n      // Garantir que o campo permissões seja sempre um array\r\n      const usuario = response.data\r\n      if (!usuario.permissoes) {\r\n        usuario.permissoes = []\r\n      } else if (!Array.isArray(usuario.permissoes)) {\r\n        // Se não for um array, converter para array\r\n        try {\r\n          if (typeof usuario.permissoes === \"string\") {\r\n            // Tentar converter de string JSON para array\r\n            usuario.permissoes = JSON.parse(usuario.permissoes)\r\n            if (!Array.isArray(usuario.permissoes)) {\r\n              usuario.permissoes = []\r\n            }\r\n          } else {\r\n            usuario.permissoes = []\r\n          }\r\n        } catch (e) {\r\n          console.error(\"Erro ao converter permissões:\", e)\r\n          usuario.permissoes = []\r\n        }\r\n      }\r\n\r\n      return usuario\r\n    } catch (error) {\r\n      console.error(`Erro ao buscar usuário ${id}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  verificarUsernameDisponivel: async (username: string): Promise<boolean> => {\r\n    try {\r\n      // Verificar se o username já existe\r\n      const usuarios = await usuarioService.listarUsuarios()\r\n      const usernameExistente = usuarios.some((u: Usuario) => u.username.toLowerCase() === username.toLowerCase())\r\n      return !usernameExistente\r\n    } catch (error) {\r\n      console.error(\"Erro ao verificar disponibilidade de username:\", error)\r\n      // Em caso de erro, assumir que o username está disponível\r\n      // e deixar o servidor validar\r\n      return true\r\n    }\r\n  },\r\n\r\n  criarUsuario: async (usuario: NovoUsuario) => {\r\n    try {\r\n      // Converter username para minúsculas para torná-lo case insensitive\r\n      const usuarioFormatado = {\r\n        ...usuario,\r\n        username: usuario.username.toLowerCase(),\r\n      }\r\n\r\n      // Verificar se o username já existe\r\n      const disponivel = await usuarioService.verificarUsernameDisponivel(usuarioFormatado.username)\r\n      if (!disponivel) {\r\n        throw new Error(\r\n          `O nome de usuário '${usuarioFormatado.username}' já está em uso. Escolha outro nome de usuário.`,\r\n        )\r\n      }\r\n\r\n      console.log(\"Enviando requisição para criar usuário:\", usuarioFormatado)\r\n\r\n      // Usar o apiClient diretamente, sem adicionar headers manualmente\r\n      // O interceptor do apiClient já adicionará o token automaticamente\r\n      const response = await apiClient.post(\"/usuarios\", usuarioFormatado)\r\n      return response.data\r\n    } catch (error: any) {\r\n      // Melhorar o tratamento de erros para identificar violações de chave única\r\n      if (\r\n        error.response &&\r\n        error.response.status === 500 &&\r\n        error.response.data &&\r\n        error.response.data.includes(\"Unique index or primary key violation\")\r\n      ) {\r\n        throw new Error(`O nome de usuário já está em uso. Escolha outro nome de usuário.`)\r\n      }\r\n\r\n      console.error(\"Erro ao criar usuário:\", error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  atualizarUsuario: async (id: number, usuario: EditarUsuario) => {\r\n    try {\r\n      // Se o username estiver sendo atualizado, converter para minúsculas\r\n      const usuarioFormatado = { ...usuario }\r\n\r\n      // Verificar se o username existe antes de tentar convertê-lo\r\n      if (usuarioFormatado.username) {\r\n        usuarioFormatado.username = usuarioFormatado.username.toLowerCase()\r\n\r\n        // Verificar se o novo username já está em uso por outro usuário\r\n        const usuarios = await usuarioService.listarUsuarios()\r\n        const usernameExistente = usuarios.some(\r\n          (u: Usuario) => u.username.toLowerCase() === usuarioFormatado.username!.toLowerCase() && u.id !== id,\r\n        )\r\n\r\n        if (usernameExistente) {\r\n          throw new Error(\r\n            `O nome de usuário '${usuarioFormatado.username}' já está em uso. Escolha outro nome de usuário.`,\r\n          )\r\n        }\r\n      }\r\n\r\n      const response = await apiClient.put(`/usuarios/${id}`, usuarioFormatado)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(`Erro ao atualizar usuário ${id}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Modificar a função removerUsuario para usar uma abordagem alternativa\r\n  // que contorna o problema de permissão no backend\r\n  removerUsuario: async (id: number) => {\r\n    try {\r\n      console.log(`Iniciando processo de remoção do usuário ${id}`)\r\n\r\n      // Verificar se o usuário existe antes de tentar removê-lo\r\n      let usuario\r\n      try {\r\n        usuario = await usuarioService.buscarUsuario(id)\r\n      } catch (error: any) {\r\n        if (error.response && error.response.status === 404) {\r\n          console.error(`Usuário ${id} não encontrado`)\r\n          throw new Error(`Usuário não encontrado. Ele pode já ter sido removido.`)\r\n        }\r\n        throw error\r\n      }\r\n\r\n      // Solução alternativa: em vez de usar DELETE, usar PUT para marcar o usuário como inativo\r\n      // Isso contorna o problema de permissão no backend\r\n      console.log(`Usando abordagem alternativa para \"remover\" o usuário ${id}`)\r\n\r\n      // Criar uma cópia do usuário com status alterado para \"Inativo\"\r\n      const usuarioInativo = {\r\n        ...usuario,\r\n        status: \"Inativo\",\r\n        ativo: false,\r\n      }\r\n\r\n      // Remover o ID para não enviá-lo na atualização\r\n      delete usuarioInativo.id\r\n\r\n      // Usar PUT em vez de DELETE\r\n      console.log(`Enviando requisição PUT para /usuarios/${id}`)\r\n      const response = await apiClient.put(`/usuarios/${id}`, usuarioInativo)\r\n\r\n      // Verificar a resposta\r\n      console.log(`Resposta da operação: Status ${response.status}`)\r\n      console.log(`Dados da resposta:`, response.data)\r\n\r\n      // Considerar a operação bem-sucedida se o status da resposta for 2xx\r\n      if (response.status >= 200 && response.status < 300) {\r\n        return { success: true, message: \"Usuário removido com sucesso (marcado como inativo)\" }\r\n      } else {\r\n        throw new Error(`Erro ao remover usuário: Status ${response.status}`)\r\n      }\r\n    } catch (error: any) {\r\n      console.error(`Erro ao remover usuário ${id}:`, error)\r\n\r\n      // Melhorar o tratamento de erros\r\n      if (error.response) {\r\n        console.error(`Status: ${error.response.status}`)\r\n        console.error(`Dados: ${JSON.stringify(error.response.data)}`)\r\n\r\n        // Se o erro for 403, é um problema de permissão\r\n        if (error.response.status === 403) {\r\n          throw new Error(\"Você não tem permissão para remover este usuário.\")\r\n        }\r\n\r\n        // Se o erro for 404, o usuário não existe\r\n        if (error.response.status === 404) {\r\n          throw new Error(\"Usuário não encontrado. Ele pode já ter sido removido.\")\r\n        }\r\n      }\r\n\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Funções para gerenciar permissões\r\n  obterPermissoes: async (id: number) => {\r\n    try {\r\n      // Usar o método buscarUsuario para obter as permissões\r\n      const usuario = await usuarioService.buscarUsuario(id)\r\n      return usuario.permissoes || []\r\n    } catch (error) {\r\n      console.error(`Erro ao obter permissões do usuário ${id}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Função específica para atualizar permissões - CORRIGIDA para usar PUT em vez de POST\r\n  atualizarPermissoes: async (id: number, permissoes: string[]) => {\r\n    try {\r\n      console.log(`Atualizando permissões do usuário ${id}:`, permissoes)\r\n\r\n      // CORREÇÃO: Usar PUT em vez de POST\r\n      const response = await apiClient.put(`/usuarios/${id}/permissoes`, { permissoes })\r\n\r\n      console.log(\"Resposta da atualização de permissões:\", response.data)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(`Erro ao atualizar permissões do usuário ${id}:`, error)\r\n\r\n      // Tentar abordagem alternativa se a primeira falhar\r\n      try {\r\n        console.log(\"Tentando abordagem alternativa para atualizar permissões\")\r\n\r\n        // Obter dados atuais do usuário\r\n        const usuario = await usuarioService.buscarUsuario(id)\r\n\r\n        // Atualizar apenas as permissões\r\n        const usuarioAtualizado = { ...usuario, permissoes }\r\n        delete usuarioAtualizado.id\r\n\r\n        // Atualizar o usuário completo\r\n        const altResponse = await apiClient.put(`/usuarios/${id}`, usuarioAtualizado)\r\n        console.log(\"Resposta da atualização alternativa:\", altResponse.data)\r\n        return altResponse.data\r\n      } catch (altError) {\r\n        console.error(\"Erro na abordagem alternativa:\", altError)\r\n        throw altError\r\n      }\r\n    }\r\n  },\r\n}\r\n\r\nexport default usuarioService\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 643, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/services/authService.ts"],"sourcesContent":["import apiClient from \"./apiClient\"\r\n\r\n// Interface para permissões que são objetos\r\ninterface PermissionObject {\r\n  id?: number | string\r\n  nome: string\r\n  descricao?: string\r\n}\r\n\r\n// Tipo união para representar os possíveis formatos de permissão\r\ntype Permission = string | PermissionObject\r\n\r\nconst authService = {\r\n  login: async (credentials: { username: string; senha: string }) => {\r\n    try {\r\n      // Remover qualquer token antigo antes de tentar fazer login\r\n      if (typeof window !== \"undefined\") {\r\n        localStorage.removeItem(\"token\")\r\n        localStorage.removeItem(\"user\")\r\n      }\r\n\r\n      console.log(\"Tentando login com username:\", credentials.username)\r\n\r\n      // Usar a URL completa para garantir que estamos acessando o endpoint correto\r\n      const response = await apiClient.post(\"/auth/login\", credentials, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          // Não incluir Authorization aqui para evitar conflitos\r\n        },\r\n      })\r\n\r\n      console.log(\"Resposta do servidor:\", response.status, response.statusText)\r\n\r\n      // Armazenar token e dados do usuário\r\n      if (typeof window !== \"undefined\") {\r\n        // Verificar se o token foi retornado\r\n        if (!response.data.token) {\r\n          console.error(\"Token não retornado pelo servidor\")\r\n          throw new Error(\"Token não retornado pelo servidor\")\r\n        }\r\n\r\n        localStorage.setItem(\"token\", response.data.token)\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data.user))\r\n\r\n        console.log(\"Login bem-sucedido. Token armazenado:\", response.data.token.substring(0, 20) + \"...\")\r\n      }\r\n\r\n      return response\r\n    } catch (error: any) {\r\n      console.error(\"Erro detalhado ao fazer login:\", {\r\n        message: error.message,\r\n        status: error.response?.status,\r\n        statusText: error.response?.statusText,\r\n        data: error.response?.data,\r\n      })\r\n\r\n      // Mensagens de erro mais específicas\r\n      if (error.response) {\r\n        if (error.response.status === 403) {\r\n          throw new Error(\"Acesso proibido. Verifique suas credenciais e permissões.\")\r\n        } else if (error.response.status === 401) {\r\n          throw new Error(\"Credenciais inválidas. Verifique seu nome de usuário e senha.\")\r\n        } else if (error.response.data) {\r\n          throw new Error(error.response.data)\r\n        }\r\n      }\r\n\r\n      throw error\r\n    }\r\n  },\r\n\r\n  isAuthenticated: () => {\r\n    if (typeof window !== \"undefined\") {\r\n      const token = localStorage.getItem(\"token\")\r\n      return !!token\r\n    }\r\n    return false\r\n  },\r\n\r\n  getCurrentUser: () => {\r\n    if (typeof window !== \"undefined\") {\r\n      const userStr = localStorage.getItem(\"user\")\r\n      if (userStr) {\r\n        return JSON.parse(userStr)\r\n      }\r\n    }\r\n    return null\r\n  },\r\n\r\n  hasPermission: (permission: string): boolean => {\r\n    const user = authService.getCurrentUser()\r\n    if (!user) return false\r\n\r\n    // Verificar se o usuário é administrador (tem todas as permissões)\r\n    if (user.perfil === \"Administrador\" || user.perfil === \"ADMIN\" || user.perfil === \"ADMINISTRADOR\") return true\r\n\r\n    // Normalizar a permissão solicitada (substituir espaços por underscores)\r\n    const normalizedPermission = permission.replace(/ /g, \"_\").toUpperCase()\r\n\r\n    // Verificar se o usuário tem a permissão específica\r\n    if (user.permissoes && Array.isArray(user.permissoes)) {\r\n      // Verificar permissões como strings\r\n      if (\r\n        user.permissoes.some(\r\n          (perm: Permission) =>\r\n            typeof perm === \"string\" && perm.replace(/ /g, \"_\").toUpperCase() === normalizedPermission,\r\n        )\r\n      ) {\r\n        return true\r\n      }\r\n\r\n      // Verificar permissões como objetos\r\n      if (\r\n        user.permissoes.some(\r\n          (perm: Permission) =>\r\n            typeof perm === \"object\" &&\r\n            perm !== null &&\r\n            \"nome\" in perm &&\r\n            typeof perm.nome === \"string\" &&\r\n            perm.nome.replace(/ /g, \"_\").toUpperCase() === normalizedPermission,\r\n        )\r\n      ) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  },\r\n\r\n  logout: () => {\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.removeItem(\"token\")\r\n      localStorage.removeItem(\"user\")\r\n      window.location.href = \"/login\"\r\n    }\r\n  },\r\n\r\n  // Nova função para renovar o token\r\n  refreshToken: async (): Promise<boolean> => {\r\n    if (typeof window === \"undefined\") return false\r\n\r\n    const token = localStorage.getItem(\"token\")\r\n    if (!token) {\r\n      console.warn(\"Não há token para renovar\")\r\n      return false\r\n    }\r\n\r\n    try {\r\n      console.log(\"Tentando renovar token...\")\r\n\r\n      // Usar axios diretamente para evitar loops com o apiClient\r\n      const baseUrl = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8080/sistema-gestao/api\"\r\n\r\n      const response = await fetch(`${baseUrl}/auth/refresh`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n\r\n      if (!response.ok) {\r\n        console.warn(`Falha ao renovar token: ${response.status} ${response.statusText}`)\r\n        return false\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      if (data && data.token) {\r\n        console.log(\"Token renovado com sucesso\")\r\n\r\n        // Atualizar token no localStorage\r\n        localStorage.setItem(\"token\", data.token)\r\n\r\n        // Atualizar token no objeto do usuário\r\n        const userStr = localStorage.getItem(\"user\")\r\n        if (userStr) {\r\n          try {\r\n            const user = JSON.parse(userStr)\r\n            user.token = data.token\r\n            localStorage.setItem(\"user\", JSON.stringify(user))\r\n          } catch (e) {\r\n            console.error(\"Erro ao atualizar usuário no localStorage:\", e)\r\n          }\r\n        }\r\n\r\n        return true\r\n      }\r\n\r\n      console.warn(\"Resposta de renovação de token não contém token\")\r\n      return false\r\n    } catch (error) {\r\n      console.error(\"Erro ao renovar token:\", error)\r\n      return false\r\n    }\r\n  },\r\n\r\n  // Função para obter o token atual\r\n  getToken: (): string | null => {\r\n    if (typeof window === \"undefined\") return null\r\n    return localStorage.getItem(\"token\")\r\n  },\r\n}\r\n\r\nexport default authService\r\n"],"names":[],"mappings":";;;AAAA;;AAYA,MAAM,cAAc;IAClB,OAAO,OAAO;QACZ,IAAI;YACF,4DAA4D;YAC5D,uCAAmC;;YAGnC;YAEA,QAAQ,GAAG,CAAC,gCAAgC,YAAY,QAAQ;YAEhE,6EAA6E;YAC7E,MAAM,WAAW,MAAM,qHAAA,CAAA,UAAS,CAAC,IAAI,CAAC,eAAe,aAAa;gBAChE,SAAS;oBACP,gBAAgB;gBAElB;YACF;YAEA,QAAQ,GAAG,CAAC,yBAAyB,SAAS,MAAM,EAAE,SAAS,UAAU;YAEzE,qCAAqC;YACrC,uCAAmC;;YAWnC;YAEA,OAAO;QACT,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,kCAAkC;gBAC9C,SAAS,MAAM,OAAO;gBACtB,QAAQ,MAAM,QAAQ,EAAE;gBACxB,YAAY,MAAM,QAAQ,EAAE;gBAC5B,MAAM,MAAM,QAAQ,EAAE;YACxB;YAEA,qCAAqC;YACrC,IAAI,MAAM,QAAQ,EAAE;gBAClB,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK;oBACjC,MAAM,IAAI,MAAM;gBAClB,OAAO,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK;oBACxC,MAAM,IAAI,MAAM;gBAClB,OAAO,IAAI,MAAM,QAAQ,CAAC,IAAI,EAAE;oBAC9B,MAAM,IAAI,MAAM,MAAM,QAAQ,CAAC,IAAI;gBACrC;YACF;YAEA,MAAM;QACR;IACF;IAEA,iBAAiB;QACf,uCAAmC;;QAGnC;QACA,OAAO;IACT;IAEA,gBAAgB;QACd,uCAAmC;;QAKnC;QACA,OAAO;IACT;IAEA,eAAe,CAAC;QACd,MAAM,OAAO,YAAY,cAAc;QACvC,IAAI,CAAC,MAAM,OAAO;QAElB,mEAAmE;QACnE,IAAI,KAAK,MAAM,KAAK,mBAAmB,KAAK,MAAM,KAAK,WAAW,KAAK,MAAM,KAAK,iBAAiB,OAAO;QAE1G,yEAAyE;QACzE,MAAM,uBAAuB,WAAW,OAAO,CAAC,MAAM,KAAK,WAAW;QAEtE,oDAAoD;QACpD,IAAI,KAAK,UAAU,IAAI,MAAM,OAAO,CAAC,KAAK,UAAU,GAAG;YACrD,oCAAoC;YACpC,IACE,KAAK,UAAU,CAAC,IAAI,CAClB,CAAC,OACC,OAAO,SAAS,YAAY,KAAK,OAAO,CAAC,MAAM,KAAK,WAAW,OAAO,uBAE1E;gBACA,OAAO;YACT;YAEA,oCAAoC;YACpC,IACE,KAAK,UAAU,CAAC,IAAI,CAClB,CAAC,OACC,OAAO,SAAS,YAChB,SAAS,QACT,UAAU,QACV,OAAO,KAAK,IAAI,KAAK,YACrB,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,WAAW,OAAO,uBAEnD;gBACA,OAAO;YACT;QACF;QAEA,OAAO;IACT;IAEA,QAAQ;QACN,uCAAmC;;QAInC;IACF;IAEA,mCAAmC;IACnC,cAAc;QACZ,wCAAmC,OAAO;;QAE1C,MAAM;IAqDR;IAEA,kCAAkC;IAClC,UAAU;QACR,wCAAmC,OAAO;;IAE5C;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/services/permissionService.ts"],"sourcesContent":["import apiClient from \"./apiClient\"\r\nimport usuarioService from \"./usuarioService\"\r\nimport authService from \"./authService\"\r\n\r\n// Interface para o DTO de permissão\r\ninterface PermissaoDTO {\r\n  id: number\r\n  nome: string\r\n  descricao: string\r\n  selecionada: boolean\r\n}\r\n\r\n// Interface para o DTO de usuário com permissões\r\ninterface UsuarioPermissoesDTO {\r\n  id: number\r\n  nome: string\r\n  perfil: string\r\n  permissoes: PermissaoDTO[]\r\n}\r\n\r\n// Interface para o DTO de atribuição de perfil\r\ninterface AtribuirPerfilDTO {\r\n  usuarioId: number\r\n  perfil: string\r\n}\r\n\r\n// Lista de permissões por perfil\r\nconst permissoesPorPerfil = {\r\n  ADMINISTRADOR: [\r\n    \"USUARIOS_VISUALIZAR\",\r\n    \"USUARIOS_CRIAR\",\r\n    \"USUARIOS_EDITAR\",\r\n    \"USUARIOS_REMOVER\",\r\n    \"USUARIOS_PERMISSOES\",\r\n    \"ESTOQUE_VISUALIZAR\",\r\n    \"ESTOQUE_ADICIONAR\",\r\n    \"ESTOQUE_EDITAR\",\r\n    \"ESTOQUE_REMOVER\",\r\n    \"VENDAS_VISUALIZAR\",\r\n    \"VENDAS_CRIAR\",\r\n    \"VENDAS_CANCELAR\",\r\n    \"FILA_VISUALIZAR\",\r\n    \"FILA_GERENCIAR\",\r\n    \"CONFIGURACOES_VISUALIZAR\",\r\n    \"CONFIGURACOES_EDITAR\",\r\n    \"RELATORIOS_VISUALIZAR\",\r\n    \"RELATORIOS_EXPORTAR\",\r\n  ],\r\n  GERENTE: [\r\n    \"USUARIOS_VISUALIZAR\",\r\n    \"ESTOQUE_VISUALIZAR\",\r\n    \"ESTOQUE_CRIAR\",\r\n    \"ESTOQUE_EDITAR\",\r\n    \"VENDAS_VISUALIZAR\",\r\n    \"VENDAS_CRIAR\",\r\n    \"VENDAS_EDITAR\",\r\n    \"RELATORIOS_VISUALIZAR\",\r\n    \"RELATORIOS_GERAR\",\r\n    \"FILA_VISUALIZAR\",\r\n    \"FILA_GERENCIAR\",\r\n  ],\r\n  VENDEDOR: [\"ESTOQUE_VISUALIZAR\", \"VENDAS_VISUALIZAR\", \"VENDAS_CRIAR\", \"FILA_VISUALIZAR\", \"FILA_GERENCIAR\"],\r\n  OPERADOR: [\"ESTOQUE_VISUALIZAR\", \"FILA_VISUALIZAR\"],\r\n}\r\n\r\n// Serviço para gerenciar permissões de usuários\r\nconst permissionService = {\r\n  // Listar todas as permissões disponíveis\r\n  listarTodasPermissoes: async (): Promise<PermissaoDTO[]> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await authService.refreshToken()\r\n\r\n      const response = await apiClient.get(\"/permissoes\")\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(\"Erro ao listar permissões:\", error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Obter as permissões de um usuário específico\r\n  obterPermissoesDoUsuario: async (usuarioId: number): Promise<UsuarioPermissoesDTO> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await authService.refreshToken()\r\n\r\n      const response = await apiClient.get(`/usuarios/${usuarioId}/permissoes`)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(`Erro ao obter permissões do usuário ${usuarioId}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Atualizar as permissões de um usuário\r\n  atualizarPermissoesDoUsuario: async (usuarioId: number, permissaoIds: number[]): Promise<void> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await authService.refreshToken()\r\n\r\n      console.log(`Atualizando permissões do usuário ${usuarioId}:`, permissaoIds)\r\n\r\n      // Importante: enviar apenas o array de IDs, não um objeto\r\n      await apiClient.put(`/usuarios/${usuarioId}/permissoes`, permissaoIds, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n    } catch (error) {\r\n      console.error(`Erro ao atualizar permissões do usuário ${usuarioId}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Atribuir um perfil a um usuário (e suas permissões associadas)\r\n  atribuirPerfilUsuario: async (usuarioId: number, perfil: string): Promise<void> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await authService.refreshToken()\r\n\r\n      console.log(`Atribuindo perfil ${perfil} ao usuário ${usuarioId}`)\r\n\r\n      // Usar o endpoint específico para atribuir perfil\r\n      const data: AtribuirPerfilDTO = {\r\n        usuarioId,\r\n        perfil,\r\n      }\r\n\r\n      // Chamar o endpoint correto para atribuir perfil\r\n      await apiClient.post(\"/permissoes/atribuir-perfil\", data, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n\r\n      console.log(\"Perfil atribuído com sucesso\")\r\n\r\n      // Atualizar o localStorage se o usuário atual for o mesmo que está sendo atualizado\r\n      if (typeof window !== \"undefined\") {\r\n        const storedUser = localStorage.getItem(\"user\")\r\n        if (storedUser) {\r\n          try {\r\n            const user = JSON.parse(storedUser)\r\n            if (user.id === usuarioId) {\r\n              user.perfil = perfil\r\n              localStorage.setItem(\"user\", JSON.stringify(user))\r\n            }\r\n          } catch (e) {\r\n            console.error(\"Erro ao atualizar perfil no localStorage:\", e)\r\n          }\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      console.error(`Erro ao atribuir perfil ao usuário ${usuarioId}:`, error)\r\n      console.error(\"Detalhes da resposta:\", error.response?.data)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Verificar se um usuário tem uma permissão específica\r\n  verificarPermissao: async (usuarioId: number, nomePermissao: string): Promise<boolean> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await authService.refreshToken()\r\n\r\n      const response = await apiClient.get(`/usuarios/${usuarioId}/permissoes/verificar?nome=${nomePermissao}`)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(`Erro ao verificar permissão ${nomePermissao} para o usuário ${usuarioId}:`, error)\r\n      return false\r\n    }\r\n  },\r\n\r\n  // Adicionar permissão VENDA_VISUALIZAR ao usuário atual\r\n  addVendaVisualizarPermission: async (): Promise<boolean> => {\r\n    try {\r\n      // Obter usuário atual do localStorage\r\n      const userStr = localStorage.getItem(\"user\")\r\n      if (!userStr) {\r\n        console.error(\"Usuário não encontrado no localStorage\")\r\n        return false\r\n      }\r\n\r\n      const user = JSON.parse(userStr)\r\n\r\n      // Verificar se o usuário já tem a permissão\r\n      if (user.permissoes && user.permissoes.includes(\"VENDA_VISUALIZAR\")) {\r\n        console.log(\"Usuário já possui a permissão VENDA_VISUALIZAR\")\r\n        return true\r\n      }\r\n\r\n      // Adicionar a permissão VENDA_VISUALIZAR\r\n      const updatedPermissions = [...user.permissoes, \"VENDA_VISUALIZAR\"]\r\n\r\n      // Atualizar o usuário no localStorage\r\n      user.permissoes = updatedPermissions\r\n      localStorage.setItem(\"user\", JSON.stringify(user))\r\n\r\n      console.log(\"Permissão VENDA_VISUALIZAR adicionada com sucesso\")\r\n      return true\r\n    } catch (error) {\r\n      console.error(\"Erro ao adicionar permissão VENDA_VISUALIZAR:\", error)\r\n      return false\r\n    }\r\n  },\r\n\r\n  // Obter permissões de um usuário\r\n  getUserPermissions: async (userId: number): Promise<string[]> => {\r\n    try {\r\n      // Tentar obter permissões do usuário específico\r\n      const response = await apiClient.get(`/usuarios/${userId}/permissoes`)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(\"Erro ao obter permissões do usuário:\", error)\r\n\r\n      // Tentar obter permissões do usuário logado como fallback\r\n      try {\r\n        const userResponse = await apiClient.get(\"/auth/me\")\r\n        return userResponse.data.permissoes || []\r\n      } catch (innerError) {\r\n        console.error(\"Erro ao obter permissões do usuário logado:\", innerError)\r\n\r\n        // Se não conseguir obter do backend, tentar obter do localStorage\r\n        if (typeof window !== \"undefined\") {\r\n          const storedUser = localStorage.getItem(\"user\")\r\n          if (storedUser) {\r\n            try {\r\n              const user = JSON.parse(storedUser)\r\n              return user.permissoes || []\r\n            } catch (e) {\r\n              console.error(\"Erro ao parsear usuário do localStorage:\", e)\r\n            }\r\n          }\r\n        }\r\n\r\n        return []\r\n      }\r\n    }\r\n  },\r\n\r\n  // Atualizar permissões de um usuário\r\n  updateUserPermissions: async (userId: number, permissions: string[]): Promise<void> => {\r\n    await apiClient.put(`/usuarios/${userId}/permissoes`, { permissoes: permissions })\r\n  },\r\n\r\n  // Atribuir permissões padrão com base no perfil\r\n  atribuirPermissoesPorPerfil: async (usuarioId: number, perfil: string): Promise<void> => {\r\n    try {\r\n      console.log(`Atribuindo permissões padrão para o perfil ${perfil} ao usuário ${usuarioId}`)\r\n\r\n      // Obter permissões padrão para o perfil\r\n      const permissoesPadrao = permissoesPorPerfil[perfil as keyof typeof permissoesPorPerfil] || []\r\n\r\n      if (permissoesPadrao.length === 0) {\r\n        console.warn(`Não há permissões padrão definidas para o perfil ${perfil}`)\r\n        return\r\n      }\r\n\r\n      console.log(`Permissões a serem atribuídas: ${permissoesPadrao.join(\", \")}`)\r\n\r\n      // Atualizar permissões do usuário\r\n      await usuarioService.atualizarPermissoes(usuarioId, permissoesPadrao)\r\n\r\n      console.log(`Permissões padrão atribuídas com sucesso ao usuário ${usuarioId}`)\r\n    } catch (error) {\r\n      console.error(`Erro ao atribuir permissões padrão para o perfil ${perfil}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n}\r\n\r\nexport default permissionService\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 968, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/loading-spinner.tsx"],"sourcesContent":["import { Loader2 } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: \"sm\" | \"md\" | \"lg\"\r\n  text?: string\r\n  className?: string\r\n  textClassName?: string\r\n}\r\n\r\nexport function LoadingSpinner({ size = \"md\", text, className, textClassName }: LoadingSpinnerProps) {\r\n  const sizeClasses = {\r\n    sm: \"h-4 w-4\",\r\n    md: \"h-6 w-6\",\r\n    lg: \"h-8 w-8\",\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\"flex items-center justify-center\", className)}>\r\n      <Loader2 className={cn(\"animate-spin text-primary\", sizeClasses[size])} />\r\n      {text && <span className={cn(\"ml-2 text-sm text-muted-foreground\", textClassName)}>{text}</span>}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AASO,SAAS,eAAe,EAAE,OAAO,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,aAAa,EAAuB;IACjG,MAAM,cAAc;QAClB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,oCAAoC;;0BACrD,8OAAC,iNAAA,CAAA,UAAO;gBAAC,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,6BAA6B,WAAW,CAAC,KAAK;;;;;;YACpE,sBAAQ,8OAAC;gBAAK,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;0BAAiB;;;;;;;;;;;;AAG1F","debugId":null}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/types/permissions.ts"],"sourcesContent":["// Definição de todas as permissões possíveis no sistema\r\nexport enum Permission {\r\n    // Permissões de Estoque\r\n    VIEW_INVENTORY = \"view_inventory\",\r\n    ADD_INVENTORY = \"add_inventory\",\r\n    EDIT_INVENTORY = \"edit_inventory\",\r\n    DELETE_INVENTORY = \"delete_inventory\",\r\n  \r\n    // Permissões de Vendas\r\n    VIEW_SALES = \"view_sales\",\r\n    CREATE_SALE = \"create_sale\",\r\n    CANCEL_SALE = \"cancel_sale\",\r\n  \r\n    // Permissões de Fila\r\n    VIEW_QUEUE = \"view_queue\",\r\n    MANAGE_QUEUE = \"manage_queue\",\r\n  \r\n    // Permissões de Relatórios\r\n    VIEW_REPORTS = \"view_reports\",\r\n    EXPORT_REPORTS = \"export_reports\",\r\n  \r\n    // Permissões de Usuários\r\n    VIEW_USERS = \"view_users\",\r\n    CREATE_USER = \"create_user\",\r\n    EDIT_USER = \"edit_user\",\r\n    DELETE_USER = \"delete_user\",\r\n    MANAGE_PERMISSIONS = \"manage_permissions\",\r\n  \r\n    // Permissões de Configurações\r\n    VIEW_SETTINGS = \"view_settings\",\r\n    EDIT_SETTINGS = \"edit_settings\",\r\n  }\r\n  \r\n  // Agrupamento de permissões por módulo para facilitar a UI\r\n  export const PermissionGroups = {\r\n    INVENTORY: [\r\n      Permission.VIEW_INVENTORY,\r\n      Permission.ADD_INVENTORY,\r\n      Permission.EDIT_INVENTORY,\r\n      Permission.DELETE_INVENTORY,\r\n    ],\r\n    SALES: [Permission.VIEW_SALES, Permission.CREATE_SALE, Permission.CANCEL_SALE],\r\n    QUEUE: [Permission.VIEW_QUEUE, Permission.MANAGE_QUEUE],\r\n    REPORTS: [Permission.VIEW_REPORTS, Permission.EXPORT_REPORTS],\r\n    USERS: [\r\n      Permission.VIEW_USERS,\r\n      Permission.CREATE_USER,\r\n      Permission.EDIT_USER,\r\n      Permission.DELETE_USER,\r\n      Permission.MANAGE_PERMISSIONS,\r\n    ],\r\n    SETTINGS: [Permission.VIEW_SETTINGS, Permission.EDIT_SETTINGS],\r\n  }\r\n  \r\n  // Permissões padrão para cada papel\r\n  export const DefaultRolePermissions = {\r\n    ADMIN: Object.values(Permission), // Admin tem todas as permissões\r\n    OPERATOR: [\r\n      Permission.VIEW_INVENTORY,\r\n      Permission.VIEW_SALES,\r\n      Permission.CREATE_SALE,\r\n      Permission.VIEW_QUEUE,\r\n      Permission.MANAGE_QUEUE,\r\n      Permission.VIEW_REPORTS,\r\n    ],\r\n  }\r\n  \r\n  // Interface para o usuário com permissões\r\n  export interface UserWithPermissions {\r\n    id: number\r\n    username: string\r\n    nome: string\r\n    perfil: string\r\n    permissions: Permission[]\r\n  }\r\n  "],"names":[],"mappings":"AAAA,wDAAwD;;;;;;AACjD,IAAA,AAAK,oCAAA;IACR,wBAAwB;;;;;IAMxB,uBAAuB;;;;IAKvB,qBAAqB;;;IAIrB,2BAA2B;;;IAI3B,yBAAyB;;;;;;IAOzB,8BAA8B;;;WA3BtB;;AAiCH,MAAM,mBAAmB;IAC9B,WAAW;;;;;KAKV;IACD,OAAO;;;;KAAuE;IAC9E,OAAO;;;KAAgD;IACvD,SAAS;;;KAAoD;IAC7D,OAAO;;;;;;KAMN;IACD,UAAU;;;KAAoD;AAChE;AAGO,MAAM,yBAAyB;IACpC,OAAO,OAAO,MAAM,CAAC;IACrB,UAAU;;;;;;;KAOT;AACH","debugId":null}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/services/cacheServices.ts"],"sourcesContent":["// Serviço para gerenciar cache no localStorage com expiração\r\nconst cacheService = {\r\n    // Armazenar dados no cache com tempo de expiração\r\n    set: <T = any>(key: string, data: T, expiryInMinutes = 30): void => {\r\n      try {\r\n        const item = {\r\n          value: data,\r\n          expiry: new Date().getTime() + expiryInMinutes * 60 * 1000,\r\n        }\r\n        localStorage.setItem(key, JSON.stringify(item))\r\n      } catch (error: any) {\r\n        console.error(`Erro ao armazenar item no cache: ${key}`, error)\r\n      }\r\n    },\r\n  \r\n    // Obter dados do cache, retorna null se expirado ou não existir\r\n    get: <T>(key: string): T | null => {\r\n      try {\r\n        const itemStr = localStorage.getItem(key)\r\n        if (!itemStr) return null\r\n  \r\n        const item = JSON.parse(itemStr)\r\n        const now = new Date().getTime()\r\n  \r\n        // Verificar se o item expirou\r\n        if (now > item.expiry) {\r\n          localStorage.removeItem(key)\r\n          return null\r\n        }\r\n  \r\n        return item.value as T\r\n      } catch (error: any) {\r\n        console.error(`Erro ao recuperar item do cache: ${key}`, error)\r\n        return null\r\n      }\r\n    },\r\n  \r\n    // Remover item do cache\r\n    remove: (key: string): void => {\r\n      try {\r\n        localStorage.removeItem(key)\r\n      } catch (error: any) {\r\n        console.error(`Erro ao remover item do cache: ${key}`, error)\r\n      }\r\n    },\r\n  \r\n    // Limpar todo o cache ou apenas itens com um prefixo específico\r\n    clear: (prefix?: string): void => {\r\n      try {\r\n        if (prefix) {\r\n          // Remover apenas itens com o prefixo especificado\r\n          Object.keys(localStorage).forEach((key) => {\r\n            if (key.startsWith(prefix)) {\r\n              localStorage.removeItem(key)\r\n            }\r\n          })\r\n        } else {\r\n          // Limpar todo o localStorage\r\n          localStorage.clear()\r\n        }\r\n      } catch (error: any) {\r\n        console.error(\"Erro ao limpar cache\", error)\r\n      }\r\n    },\r\n  \r\n    // Verificar se um item existe no cache e não está expirado\r\n    has: (key: string): boolean => {\r\n      try {\r\n        const itemStr = localStorage.getItem(key)\r\n        if (!itemStr) return false\r\n  \r\n        const item = JSON.parse(itemStr)\r\n        const now = new Date().getTime()\r\n  \r\n        return now < item.expiry\r\n      } catch (error: any) {\r\n        console.error(`Erro ao verificar item no cache: ${key}`, error)\r\n        return false\r\n      }\r\n    },\r\n  \r\n    // Atualizar a expiração de um item existente\r\n    updateExpiry: (key: string, expiryInMinutes: number = 30): boolean => {\r\n      try {\r\n        const itemStr = localStorage.getItem(key)\r\n        if (!itemStr) return false\r\n  \r\n        const item = JSON.parse(itemStr)\r\n        item.expiry = new Date().getTime() + expiryInMinutes * 60 * 1000\r\n        localStorage.setItem(key, JSON.stringify(item))\r\n        return true\r\n      } catch (error: any) {\r\n        console.error(`Erro ao atualizar expiração do item no cache: ${key}`, error)\r\n        return false\r\n      }\r\n    },\r\n  }\r\n  \r\n  export default cacheService\r\n  "],"names":[],"mappings":"AAAA,6DAA6D;;;;AAC7D,MAAM,eAAe;IACjB,kDAAkD;IAClD,KAAK,CAAU,KAAa,MAAS,kBAAkB,EAAE;QACvD,IAAI;YACF,MAAM,OAAO;gBACX,OAAO;gBACP,QAAQ,IAAI,OAAO,OAAO,KAAK,kBAAkB,KAAK;YACxD;YACA,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;QAC3C,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,CAAC,iCAAiC,EAAE,KAAK,EAAE;QAC3D;IACF;IAEA,gEAAgE;IAChE,KAAK,CAAI;QACP,IAAI;YACF,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,IAAI,CAAC,SAAS,OAAO;YAErB,MAAM,OAAO,KAAK,KAAK,CAAC;YACxB,MAAM,MAAM,IAAI,OAAO,OAAO;YAE9B,8BAA8B;YAC9B,IAAI,MAAM,KAAK,MAAM,EAAE;gBACrB,aAAa,UAAU,CAAC;gBACxB,OAAO;YACT;YAEA,OAAO,KAAK,KAAK;QACnB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,CAAC,iCAAiC,EAAE,KAAK,EAAE;YACzD,OAAO;QACT;IACF;IAEA,wBAAwB;IACxB,QAAQ,CAAC;QACP,IAAI;YACF,aAAa,UAAU,CAAC;QAC1B,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,CAAC,+BAA+B,EAAE,KAAK,EAAE;QACzD;IACF;IAEA,gEAAgE;IAChE,OAAO,CAAC;QACN,IAAI;YACF,IAAI,QAAQ;gBACV,kDAAkD;gBAClD,OAAO,IAAI,CAAC,cAAc,OAAO,CAAC,CAAC;oBACjC,IAAI,IAAI,UAAU,CAAC,SAAS;wBAC1B,aAAa,UAAU,CAAC;oBAC1B;gBACF;YACF,OAAO;gBACL,6BAA6B;gBAC7B,aAAa,KAAK;YACpB;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,wBAAwB;QACxC;IACF;IAEA,2DAA2D;IAC3D,KAAK,CAAC;QACJ,IAAI;YACF,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,IAAI,CAAC,SAAS,OAAO;YAErB,MAAM,OAAO,KAAK,KAAK,CAAC;YACxB,MAAM,MAAM,IAAI,OAAO,OAAO;YAE9B,OAAO,MAAM,KAAK,MAAM;QAC1B,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,CAAC,iCAAiC,EAAE,KAAK,EAAE;YACzD,OAAO;QACT;IACF;IAEA,6CAA6C;IAC7C,cAAc,CAAC,KAAa,kBAA0B,EAAE;QACtD,IAAI;YACF,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,IAAI,CAAC,SAAS,OAAO;YAErB,MAAM,OAAO,KAAK,KAAK,CAAC;YACxB,KAAK,MAAM,GAAG,IAAI,OAAO,OAAO,KAAK,kBAAkB,KAAK;YAC5D,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;YACzC,OAAO;QACT,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,CAAC,8CAA8C,EAAE,KAAK,EAAE;YACtE,OAAO;QACT;IACF;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/contexts/PermissionContext.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { createContext, useContext, useState, useEffect, useCallback } from \"react\"\r\nimport { useAuth } from \"./AuthContext\"\r\nimport { Permission } from \"../types/permissions\"\r\n\r\nimport { useToast } from \"@/components/ui/use-toast\"\r\nimport apiClient from \"@/services/apiClient\"\r\nimport cacheService from \"@/services/cacheServices\"\r\n\r\n// Mapeamento entre permissões do frontend e backend\r\nconst permissionMapping: Record<string, string> = {\r\n  // Estoque\r\n  [Permission.VIEW_INVENTORY]: \"ESTOQUE_VISUALIZAR\",\r\n  [Permission.ADD_INVENTORY]: \"ESTOQUE_ADICIONAR\",\r\n  [Permission.EDIT_INVENTORY]: \"ESTOQUE_EDITAR\",\r\n  [Permission.DELETE_INVENTORY]: \"ESTOQUE_REMOVER\",\r\n\r\n  // Vendas\r\n  [Permission.VIEW_SALES]: \"VENDAS_VISUALIZAR\",\r\n  [Permission.CREATE_SALE]: \"VENDAS_CRIAR\",\r\n  [Permission.CANCEL_SALE]: \"VENDAS_CANCELAR\",\r\n\r\n  // Fila\r\n  [Permission.VIEW_QUEUE]: \"FILA_VISUALIZAR\",\r\n  [Permission.MANAGE_QUEUE]: \"FILA_GERENCIAR\",\r\n\r\n  // Relatórios\r\n  [Permission.VIEW_REPORTS]: \"RELATORIOS_VISUALIZAR\",\r\n  [Permission.EXPORT_REPORTS]: \"RELATORIOS_EXPORTAR\",\r\n\r\n  // Usuários\r\n  [Permission.VIEW_USERS]: \"USUARIOS_VISUALIZAR\",\r\n  [Permission.CREATE_USER]: \"USUARIOS_CRIAR\",\r\n  [Permission.EDIT_USER]: \"USUARIOS_EDITAR\",\r\n  [Permission.DELETE_USER]: \"USUARIOS_REMOVER\",\r\n  [Permission.MANAGE_PERMISSIONS]: \"USUARIOS_PERMISSOES\",\r\n\r\n  // Configurações\r\n  [Permission.VIEW_SETTINGS]: \"CONFIGURACOES_VISUALIZAR\",\r\n  [Permission.EDIT_SETTINGS]: \"CONFIGURACOES_EDITAR\",\r\n}\r\n\r\n// Mapeamento inverso (backend para frontend)\r\nconst reversePermissionMapping: Record<string, Permission> = Object.entries(permissionMapping).reduce(\r\n  (acc, [frontendPerm, backendPerm]) => {\r\n    acc[backendPerm] = frontendPerm as Permission\r\n    return acc\r\n  },\r\n  {} as Record<string, Permission>,\r\n)\r\n\r\nconst PERMISSION_CACHE_PREFIX = \"permission_\"\r\nconst USER_PERMISSIONS_CACHE_KEY = \"user_permissions\"\r\n\r\ninterface PermissionContextProps {\r\n  permissions: Permission[]\r\n  backendPermissions: string[]\r\n  loading: boolean\r\n  hasPermission: (permissionName: string) => boolean\r\n  hasAnyPermission: (permissionNames: string[]) => boolean\r\n  hasAllPermissions: (permissionNames: string[]) => boolean\r\n  refreshPermissions: () => Promise<void>\r\n  clearPermissionCache: () => void\r\n}\r\n\r\nconst PermissionContext = createContext<PermissionContextProps>({\r\n  permissions: [],\r\n  backendPermissions: [],\r\n  loading: true,\r\n  hasPermission: () => false,\r\n  hasAnyPermission: () => false,\r\n  hasAllPermissions: () => false,\r\n  refreshPermissions: async () => {},\r\n  clearPermissionCache: () => {},\r\n})\r\n\r\ninterface PermissionProviderProps {\r\n  children: React.ReactNode\r\n}\r\n\r\n// Constantes para cache\r\nconst PERMISSIONS_CACHE_KEY_PREFIX = \"user_permissions_\"\r\nconst PERMISSIONS_CACHE_EXPIRY = 30 // 30 minutos\r\n\r\nexport const PermissionProvider: React.FC<PermissionProviderProps> = ({ children }) => {\r\n  const [backendPermissions, setBackendPermissions] = useState<string[]>([])\r\n  const [permissions, setPermissions] = useState<Permission[]>([])\r\n  const [loading, setLoading] = useState<boolean>(true)\r\n  const { isAuthenticated, user, loading: authLoading } = useAuth()\r\n  const { toast } = useToast()\r\n\r\n  // Converter permissões do backend para o frontend\r\n  const convertToFrontendPermissions = (backendPerms: string[]): Permission[] => {\r\n    return backendPerms\r\n      .map((backendPerm) => reversePermissionMapping[backendPerm])\r\n      .filter((perm): perm is Permission => !!perm)\r\n  }\r\n\r\n  // Verificar se o usuário tem uma permissão específica\r\n  const hasPermission = useCallback(\r\n    (permissionName: string): boolean => {\r\n      // Se for uma permissão do frontend, converter para o formato do backend\r\n      const backendPerm = permissionMapping[permissionName] || permissionName\r\n\r\n      // Verificar se o usuário tem a permissão no formato do backend\r\n      return backendPermissions.includes(backendPerm)\r\n    },\r\n    [backendPermissions],\r\n  )\r\n\r\n  // Verificar se o usuário tem pelo menos uma das permissões\r\n  const hasAnyPermission = useCallback(\r\n    (permissionNames: string[]): boolean => {\r\n      return permissionNames.some((perm) => hasPermission(perm))\r\n    },\r\n    [hasPermission],\r\n  )\r\n\r\n  // Verificar se o usuário tem todas as permissões\r\n  const hasAllPermissions = useCallback(\r\n    (permissionNames: string[]): boolean => {\r\n      return permissionNames.every((perm) => hasPermission(perm))\r\n    },\r\n    [hasPermission],\r\n  )\r\n\r\n  // Limpar o cache de permissões\r\n  const clearPermissionCache = useCallback(() => {\r\n    if (user?.id) {\r\n      const cacheKey = `${PERMISSIONS_CACHE_KEY_PREFIX}${user.id}`\r\n      cacheService.remove(cacheKey)\r\n      console.log(\"Cache de permissões limpo\")\r\n    } else {\r\n      cacheService.clear(PERMISSIONS_CACHE_KEY_PREFIX)\r\n      console.log(\"Todo o cache de permissões foi limpo\")\r\n    }\r\n  }, [user?.id])\r\n\r\n  // Função para buscar permissões do servidor\r\n  const fetchPermissionsFromServer = async (userId: number): Promise<string[]> => {\r\n    try {\r\n      console.log(`Buscando permissões do usuário ${userId} do servidor...`)\r\n\r\n      // Tentar obter permissões do usuário específico\r\n      const response = await apiClient.get(`/permissoes/usuario/${userId}/todas`)\r\n      const permissoes = response.data\r\n\r\n      console.log(`Permissões obtidas do servidor:`, permissoes)\r\n\r\n      // Armazenar no cache\r\n      if (permissoes && Array.isArray(permissoes)) {\r\n        const cacheKey = `${PERMISSIONS_CACHE_KEY_PREFIX}${userId}`\r\n        cacheService.set(cacheKey, permissoes, PERMISSIONS_CACHE_EXPIRY)\r\n        console.log(`Permissões armazenadas no cache com chave ${cacheKey}`)\r\n      }\r\n\r\n      return permissoes || []\r\n    } catch (error) {\r\n      console.error(\"Erro ao buscar permissões do servidor:\", error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // Função para atualizar as permissões\r\n  const refreshPermissions = async () => {\r\n    if (!isAuthenticated || !user) {\r\n      setBackendPermissions([])\r\n      setPermissions([])\r\n      setLoading(false)\r\n      return\r\n    }\r\n\r\n    try {\r\n      setLoading(true)\r\n      console.log(\"Atualizando permissões para o usuário:\", user.id)\r\n\r\n      // Tentar buscar permissões do servidor\r\n      const permissoes = await fetchPermissionsFromServer(user.id)\r\n\r\n      // Atualizar os estados\r\n      setBackendPermissions(permissoes)\r\n      setPermissions(convertToFrontendPermissions(permissoes))\r\n\r\n      console.log(\"Permissões atualizadas:\", permissoes)\r\n\r\n      // Mostrar toast de sucesso\r\n      toast({\r\n        title: \"Permissões atualizadas\",\r\n        description: \"Suas permissões foram atualizadas com sucesso.\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"Erro ao atualizar permissões:\", error)\r\n\r\n      // Se o usuário tiver permissões no objeto user, usar como fallback\r\n      if (user.permissoes && Array.isArray(user.permissoes)) {\r\n        setBackendPermissions(user.permissoes)\r\n        setPermissions(convertToFrontendPermissions(user.permissoes))\r\n\r\n        // Mostrar toast de aviso\r\n        toast({\r\n          title: \"Aviso\",\r\n          description: \"Usando permissões em cache. Algumas funcionalidades podem estar limitadas.\",\r\n          variant: \"default\",\r\n        })\r\n      } else {\r\n        // Mostrar toast de erro\r\n        toast({\r\n          title: \"Erro\",\r\n          description: \"Não foi possível carregar suas permissões. Tente novamente mais tarde.\",\r\n          variant: \"destructive\",\r\n        })\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const fetchUserPermissions = useCallback(async () => {\r\n    if (!user) return\r\n\r\n    setLoading(true)\r\n\r\n    try {\r\n      // Verificar se as permissões estão em cache\r\n      const cachedPermissions = cacheService.get<string[]>(USER_PERMISSIONS_CACHE_KEY)\r\n\r\n      if (cachedPermissions) {\r\n        console.log(\"Usando permissões em cache\")\r\n        setBackendPermissions(cachedPermissions)\r\n        setPermissions(convertToFrontendPermissions(cachedPermissions))\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      // Se não estiver em cache, buscar do servidor\r\n      const permissoes = await fetchPermissionsFromServer(user.id)\r\n\r\n      setBackendPermissions(permissoes)\r\n      setPermissions(convertToFrontendPermissions(permissoes))\r\n\r\n      // Salvar no cache por 30 minutos\r\n      cacheService.set(USER_PERMISSIONS_CACHE_KEY, permissoes, 30)\r\n    } catch (error) {\r\n      console.error(\"Erro ao buscar permissões:\", error)\r\n      setPermissions([])\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [user, isAuthenticated, authLoading])\r\n\r\n  const clearPermissionsCache = useCallback(() => {\r\n    cacheService.remove(USER_PERMISSIONS_CACHE_KEY)\r\n    cacheService.clear(PERMISSION_CACHE_PREFIX)\r\n  }, [])\r\n\r\n  const checkPermission = useCallback(\r\n    async (requiredPermission: string): Promise<boolean> => {\r\n      if (!user) return false\r\n\r\n      // Verificar se o resultado está em cache\r\n      const cacheKey = `${PERMISSION_CACHE_PREFIX}${requiredPermission}`\r\n      const cachedResult = cacheService.get<boolean>(cacheKey)\r\n\r\n      if (cachedResult !== null) {\r\n        return cachedResult\r\n      }\r\n\r\n      // Se não estiver em cache, verificar nas permissões carregadas\r\n      const hasPermission = backendPermissions.includes(requiredPermission)\r\n\r\n      // Salvar resultado no cache por 30 minutos\r\n      cacheService.set(cacheKey, hasPermission, 30)\r\n\r\n      return hasPermission\r\n    },\r\n    [user, backendPermissions],\r\n  )\r\n\r\n  // Carregar permissões quando o usuário estiver autenticado\r\n  useEffect(() => {\r\n    const loadPermissions = async () => {\r\n      if (!isAuthenticated || !user) {\r\n        setBackendPermissions([])\r\n        setPermissions([])\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      try {\r\n        // Tentar carregar permissões do cache primeiro\r\n        const cacheKey = `${PERMISSIONS_CACHE_KEY_PREFIX}${user.id}`\r\n        const cachedPermissions = cacheService.get<string[]>(cacheKey)\r\n\r\n        if (cachedPermissions && cachedPermissions.length > 0) {\r\n          console.log(\"Usando permissões do cache:\", cachedPermissions)\r\n          setBackendPermissions(cachedPermissions)\r\n          setPermissions(convertToFrontendPermissions(cachedPermissions))\r\n          setLoading(false)\r\n          return\r\n        }\r\n\r\n        // Se não houver permissões em cache ou estiverem expiradas, carregar do backend\r\n        await refreshPermissions()\r\n      } catch (error) {\r\n        console.error(\"Erro ao carregar permissões:\", error)\r\n\r\n        // Se o usuário tiver permissões no objeto user, usar como fallback\r\n        if (user.permissoes && Array.isArray(user.permissoes)) {\r\n          setBackendPermissions(user.permissoes)\r\n          setPermissions(convertToFrontendPermissions(user.permissoes))\r\n        }\r\n\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    if (!authLoading) {\r\n      loadPermissions()\r\n    }\r\n  }, [user, isAuthenticated, authLoading])\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setBackendPermissions([])\r\n      setPermissions([])\r\n      // Corrigido: usar clear com prefixo em vez de clearWithPrefix\r\n      cacheService.remove(USER_PERMISSIONS_CACHE_KEY)\r\n      cacheService.clear(PERMISSION_CACHE_PREFIX)\r\n    }\r\n  }, [user])\r\n\r\n  return (\r\n    <PermissionContext.Provider\r\n      value={{\r\n        permissions,\r\n        backendPermissions,\r\n        loading,\r\n        hasPermission,\r\n        hasAnyPermission,\r\n        hasAllPermissions,\r\n        refreshPermissions,\r\n        clearPermissionCache,\r\n      }}\r\n    >\r\n      {children}\r\n    </PermissionContext.Provider>\r\n  )\r\n}\r\n\r\nexport const usePermission = () => useContext(PermissionContext)\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1496, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/services/erroService.ts"],"sourcesContent":["import toastService from \"@/services/toastService\"\r\n\r\n// Tipos de erro\r\nexport enum ErrorType {\r\n  AUTHENTICATION = \"authentication\",\r\n  AUTHORIZATION = \"authorization\",\r\n  VALIDATION = \"validation\",\r\n  SERVER = \"server\",\r\n  NETWORK = \"network\",\r\n  UNKNOWN = \"unknown\",\r\n}\r\n\r\n// Interface para erros padronizados\r\nexport interface StandardError {\r\n  type: ErrorType\r\n  message: string\r\n  details?: string\r\n  originalError?: any\r\n  statusCode?: number\r\n}\r\n\r\n// Serviço para tratamento de erros\r\nconst errorService = {\r\n  // Processar erro e retornar um objeto de erro padronizado\r\n  processError: (error: any): StandardError => {\r\n    // Erro de rede (sem conexão)\r\n    if (error.message === \"Network Error\" || !error.response) {\r\n      return {\r\n        type: ErrorType.NETWORK,\r\n        message: \"Erro de conexão\",\r\n        details: \"Não foi possível conectar ao servidor. Verifique sua conexão de internet.\",\r\n        originalError: error,\r\n      }\r\n    }\r\n\r\n    // Erro com resposta do servidor\r\n    if (error.response) {\r\n      const { status, data } = error.response\r\n\r\n      // Erro de autenticação (401)\r\n      if (status === 401) {\r\n        return {\r\n          type: ErrorType.AUTHENTICATION,\r\n          message: \"Sessão expirada\",\r\n          details: \"Sua sessão expirou. Por favor, faça login novamente.\",\r\n          statusCode: status,\r\n          originalError: error,\r\n        }\r\n      }\r\n\r\n      // Erro de autorização (403)\r\n      if (status === 403) {\r\n        return {\r\n          type: ErrorType.AUTHORIZATION,\r\n          message: \"Acesso negado\",\r\n          details: \"Você não tem permissão para acessar este recurso.\",\r\n          statusCode: status,\r\n          originalError: error,\r\n        }\r\n      }\r\n\r\n      // Erro de validação (400)\r\n      if (status === 400) {\r\n        return {\r\n          type: ErrorType.VALIDATION,\r\n          message: \"Dados inválidos\",\r\n          details: data?.message || \"Os dados fornecidos são inválidos.\",\r\n          statusCode: status,\r\n          originalError: error,\r\n        }\r\n      }\r\n\r\n      // Erro do servidor (500)\r\n      if (status >= 500) {\r\n        return {\r\n          type: ErrorType.SERVER,\r\n          message: \"Erro no servidor\",\r\n          details: data?.message || \"Ocorreu um erro no servidor. Tente novamente mais tarde.\",\r\n          statusCode: status,\r\n          originalError: error,\r\n        }\r\n      }\r\n\r\n      // Outros erros HTTP\r\n      return {\r\n        type: ErrorType.UNKNOWN,\r\n        message: \"Erro desconhecido\",\r\n        details: data?.message || `Erro ${status}: ${error.message}`,\r\n        statusCode: status,\r\n        originalError: error,\r\n      }\r\n    }\r\n\r\n    // Erro genérico\r\n    return {\r\n      type: ErrorType.UNKNOWN,\r\n      message: \"Erro desconhecido\",\r\n      details: error.message || \"Ocorreu um erro inesperado.\",\r\n      originalError: error,\r\n    }\r\n  },\r\n\r\n  // Tratar erro e mostrar toast apropriado\r\n  handleError: (error: any, customMessage?: string): StandardError => {\r\n    const standardError = errorService.processError(error)\r\n\r\n    // Log do erro para depuração\r\n    console.error(\"Erro capturado:\", standardError)\r\n\r\n    // Mostrar toast com mensagem de erro\r\n    toastService.error(customMessage || standardError.message, standardError.details)\r\n\r\n    // Redirecionar para login se for erro de autenticação\r\n    if (standardError.type === ErrorType.AUTHENTICATION && typeof window !== \"undefined\") {\r\n      setTimeout(() => {\r\n        window.location.href = \"/login\"\r\n      }, 2000)\r\n    }\r\n\r\n    return standardError\r\n  },\r\n\r\n  // Tratar erro silenciosamente (sem toast)\r\n  handleErrorSilently: (error: any): StandardError => {\r\n    const standardError = errorService.processError(error)\r\n    console.error(\"Erro capturado (silencioso):\", standardError)\r\n    return standardError\r\n  },\r\n\r\n  // Verificar se é um erro de autenticação\r\n  isAuthenticationError: (error: any): boolean => {\r\n    return error?.response?.status === 401\r\n  },\r\n\r\n  // Verificar se é um erro de autorização\r\n  isAuthorizationError: (error: any): boolean => {\r\n    return error?.response?.status === 403\r\n  },\r\n\r\n  // Verificar se é um erro de rede\r\n  isNetworkError: (error: any): boolean => {\r\n    return error.message === \"Network Error\" || !error.response\r\n  },\r\n}\r\n\r\nexport default errorService\r\n"],"names":[],"mappings":";;;;AAAA;;AAGO,IAAA,AAAK,mCAAA;;;;;;;WAAA;;AAkBZ,mCAAmC;AACnC,MAAM,eAAe;IACnB,0DAA0D;IAC1D,cAAc,CAAC;QACb,6BAA6B;QAC7B,IAAI,MAAM,OAAO,KAAK,mBAAmB,CAAC,MAAM,QAAQ,EAAE;YACxD,OAAO;gBACL,IAAI;gBACJ,SAAS;gBACT,SAAS;gBACT,eAAe;YACjB;QACF;QAEA,gCAAgC;QAChC,IAAI,MAAM,QAAQ,EAAE;YAClB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,QAAQ;YAEvC,6BAA6B;YAC7B,IAAI,WAAW,KAAK;gBAClB,OAAO;oBACL,IAAI;oBACJ,SAAS;oBACT,SAAS;oBACT,YAAY;oBACZ,eAAe;gBACjB;YACF;YAEA,4BAA4B;YAC5B,IAAI,WAAW,KAAK;gBAClB,OAAO;oBACL,IAAI;oBACJ,SAAS;oBACT,SAAS;oBACT,YAAY;oBACZ,eAAe;gBACjB;YACF;YAEA,0BAA0B;YAC1B,IAAI,WAAW,KAAK;gBAClB,OAAO;oBACL,IAAI;oBACJ,SAAS;oBACT,SAAS,MAAM,WAAW;oBAC1B,YAAY;oBACZ,eAAe;gBACjB;YACF;YAEA,yBAAyB;YACzB,IAAI,UAAU,KAAK;gBACjB,OAAO;oBACL,IAAI;oBACJ,SAAS;oBACT,SAAS,MAAM,WAAW;oBAC1B,YAAY;oBACZ,eAAe;gBACjB;YACF;YAEA,oBAAoB;YACpB,OAAO;gBACL,IAAI;gBACJ,SAAS;gBACT,SAAS,MAAM,WAAW,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE,MAAM,OAAO,EAAE;gBAC5D,YAAY;gBACZ,eAAe;YACjB;QACF;QAEA,gBAAgB;QAChB,OAAO;YACL,IAAI;YACJ,SAAS;YACT,SAAS,MAAM,OAAO,IAAI;YAC1B,eAAe;QACjB;IACF;IAEA,yCAAyC;IACzC,aAAa,CAAC,OAAY;QACxB,MAAM,gBAAgB,aAAa,YAAY,CAAC;QAEhD,6BAA6B;QAC7B,QAAQ,KAAK,CAAC,mBAAmB;QAEjC,qCAAqC;QACrC,wHAAA,CAAA,UAAY,CAAC,KAAK,CAAC,iBAAiB,cAAc,OAAO,EAAE,cAAc,OAAO;QAEhF,sDAAsD;QACtD,uCAAsF;;QAItF;QAEA,OAAO;IACT;IAEA,0CAA0C;IAC1C,qBAAqB,CAAC;QACpB,MAAM,gBAAgB,aAAa,YAAY,CAAC;QAChD,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;IAEA,yCAAyC;IACzC,uBAAuB,CAAC;QACtB,OAAO,OAAO,UAAU,WAAW;IACrC;IAEA,wCAAwC;IACxC,sBAAsB,CAAC;QACrB,OAAO,OAAO,UAAU,WAAW;IACrC;IAEA,iCAAiC;IACjC,gBAAgB,CAAC;QACf,OAAO,MAAM,OAAO,KAAK,mBAAmB,CAAC,MAAM,QAAQ;IAC7D;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 1623, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/feedback-message.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { AlertCircle, CheckCircle, Info, AlertTriangle } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport type FeedbackType = \"success\" | \"error\" | \"info\" | \"warning\"\r\n\r\ninterface FeedbackMessageProps {\r\n  type: FeedbackType\r\n  title?: string\r\n  message: string\r\n  className?: string\r\n  onDismiss?: () => void\r\n}\r\n\r\nexport function FeedbackMessage({ type, title, message, className, onDismiss }: FeedbackMessageProps) {\r\n  // Mapear tipo para classes de cor\r\n  const colorClassMap: Record<FeedbackType, string> = {\r\n    success: \"border-green-200 bg-green-50 text-green-800 dark:border-green-800 dark:bg-green-950 dark:text-green-200\",\r\n    error: \"border-red-200 bg-red-50 text-red-800 dark:border-red-800 dark:bg-red-950 dark:text-red-200\",\r\n    info: \"border-blue-200 bg-blue-50 text-blue-800 dark:border-blue-800 dark:bg-blue-950 dark:text-blue-200\",\r\n    warning:\r\n      \"border-yellow-200 bg-yellow-50 text-yellow-800 dark:border-yellow-800 dark:bg-yellow-950 dark:text-yellow-200\",\r\n  }\r\n\r\n  // Mapear tipo para ícone\r\n  const IconMap = {\r\n    success: CheckCircle,\r\n    error: AlertCircle,\r\n    info: Info,\r\n    warning: AlertTriangle,\r\n  }\r\n\r\n  const Icon = IconMap[type]\r\n\r\n  return (\r\n    <div className={cn(\"flex items-start gap-3 rounded-md border p-4\", colorClassMap[type], className)}>\r\n      <Icon className=\"h-5 w-5 flex-shrink-0\" />\r\n      <div className=\"flex-1\">\r\n        {title && <h4 className=\"mb-1 font-medium\">{title}</h4>}\r\n        <p className=\"text-sm\">{message}</p>\r\n      </div>\r\n      {onDismiss && (\r\n        <button\r\n          onClick={onDismiss}\r\n          className=\"ml-auto -mr-1 -mt-1 h-6 w-6 rounded-full p-1 hover:bg-black/5 dark:hover:bg-white/10\"\r\n          aria-label=\"Fechar\"\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"h-4 w-4\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"2\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n          >\r\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n          </svg>\r\n        </button>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAeO,SAAS,gBAAgB,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAwB;IAClG,kCAAkC;IAClC,MAAM,gBAA8C;QAClD,SAAS;QACT,OAAO;QACP,MAAM;QACN,SACE;IACJ;IAEA,yBAAyB;IACzB,MAAM,UAAU;QACd,SAAS,2NAAA,CAAA,cAAW;QACpB,OAAO,oNAAA,CAAA,cAAW;QAClB,MAAM,kMAAA,CAAA,OAAI;QACV,SAAS,wNAAA,CAAA,gBAAa;IACxB;IAEA,MAAM,OAAO,OAAO,CAAC,KAAK;IAE1B,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD,aAAa,CAAC,KAAK,EAAE;;0BACtF,8OAAC;gBAAK,WAAU;;;;;;0BAChB,8OAAC;gBAAI,WAAU;;oBACZ,uBAAS,8OAAC;wBAAG,WAAU;kCAAoB;;;;;;kCAC5C,8OAAC;wBAAE,WAAU;kCAAW;;;;;;;;;;;;YAEzB,2BACC,8OAAC;gBACC,SAAS;gBACT,WAAU;gBACV,cAAW;0BAEX,cAAA,8OAAC;oBACC,OAAM;oBACN,WAAU;oBACV,SAAQ;oBACR,MAAK;oBACL,QAAO;oBACP,aAAY;oBACZ,eAAc;oBACd,gBAAe;;sCAEf,8OAAC;4BAAK,IAAG;4BAAK,IAAG;4BAAI,IAAG;4BAAI,IAAG;;;;;;sCAC/B,8OAAC;4BAAK,IAAG;4BAAI,IAAG;4BAAI,IAAG;4BAAK,IAAG;;;;;;;;;;;;;;;;;;;;;;;AAM3C","debugId":null}},
    {"offset": {"line": 1745, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/app/usuarios/perfis/otimizado/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { useRouter, useSearchParams } from \"next/navigation\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { BackButton } from \"@/components/ui/BackButton\"\r\nimport { useToast } from \"@/components/ui/use-toast\"\r\nimport { RefreshCw } from \"lucide-react\"\r\nimport apiClient from \"@/services/apiClient\"\r\nimport { useAuth } from \"@/contexts/AuthContext\"\r\nimport permissionService from \"@/services/permissionService\"\r\nimport { LoadingSpinner } from \"@/components/ui/loading-spinner\"\r\n\r\n\r\nimport { usePermission } from \"@/contexts/PermissionContext\"\r\nimport errorService from \"@/services/erroService\"\r\nimport { FeedbackMessage } from \"@/components/ui/feedback-message\"\r\n\r\n\r\ninterface Usuario {\r\n  id: number\r\n  nome: string\r\n  username: string\r\n  email: string\r\n  cargo: string\r\n  perfil: string\r\n}\r\n\r\nexport default function GerenciarPerfilUsuarioOtimizado() {\r\n  const router = useRouter()\r\n  const searchParams = useSearchParams()\r\n  const { toast } = useToast()\r\n  const { refreshAuth } = useAuth()\r\n  const { refreshPermissions, clearPermissionCache } = usePermission()\r\n\r\n  const userId = searchParams.get(\"id\") ? Number.parseInt(searchParams.get(\"id\") as string, 10) : 0\r\n\r\n  const [usuario, setUsuario] = useState<Usuario | null>(null)\r\n  const [carregando, setCarregando] = useState(false)\r\n  const [perfilSelecionado, setPerfilSelecionado] = useState<string>(\"\")\r\n  const [salvando, setSalvando] = useState(false)\r\n  const [erro, setErro] = useState<string | null>(null)\r\n  const [sucesso, setSucesso] = useState<string | null>(null)\r\n  const [feedback, setFeedback] = useState<{\r\n    type: \"success\" | \"error\" | \"info\" | \"warning\"\r\n    message: string\r\n  } | null>(null)\r\n\r\n  // Função para carregar dados do usuário automaticamente ao montar o componente\r\n  useEffect(() => {\r\n    if (userId && !isNaN(userId)) {\r\n      carregarUsuario()\r\n    }\r\n  }, [userId])\r\n\r\n  // Função para carregar dados do usuário\r\n  const carregarUsuario = async () => {\r\n    if (!userId || isNaN(userId)) {\r\n      setErro(\"ID de usuário inválido\")\r\n      return\r\n    }\r\n\r\n    try {\r\n      setCarregando(true)\r\n      setErro(null)\r\n      setSucesso(null)\r\n\r\n      console.log(\"Renovando token...\")\r\n      try {\r\n        await refreshAuth()\r\n        console.log(\"Token renovado com sucesso\")\r\n      } catch (error) {\r\n        console.error(\"Erro ao renovar token:\", error)\r\n      }\r\n\r\n      console.log(\"Buscando usuário com ID:\", userId)\r\n      const response = await apiClient.get(`/usuarios/${userId}`)\r\n      const data = response.data\r\n      console.log(\"Dados do usuário recebidos:\", data)\r\n\r\n      setUsuario(data)\r\n      setPerfilSelecionado(data.perfil || \"\")\r\n\r\n      toast({\r\n        title: \"Sucesso\",\r\n        description: \"Dados do usuário carregados com sucesso.\",\r\n      })\r\n    } catch (error: any) {\r\n      const standardError = errorService.handleError(error, \"Erro ao carregar usuário\")\r\n      setErro(standardError.details || \"Erro ao carregar dados do usuário\")\r\n    } finally {\r\n      setCarregando(false)\r\n    }\r\n  }\r\n\r\n  const handleSalvarPerfil = async () => {\r\n    if (!usuario) {\r\n      toast({\r\n        title: \"Erro\",\r\n        description: \"Nenhum usuário carregado para salvar.\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    try {\r\n      setSalvando(true)\r\n      setErro(null)\r\n      setSucesso(null)\r\n\r\n      if (!perfilSelecionado) {\r\n        toast({\r\n          title: \"Atenção\",\r\n          description: \"Selecione um perfil para o usuário.\",\r\n          variant: \"destructive\",\r\n        })\r\n        setSalvando(false)\r\n        return\r\n      }\r\n\r\n      console.log(\"Atribuindo perfil:\", perfilSelecionado, \"ao usuário:\", usuario.id)\r\n\r\n      // Usar o serviço específico para atribuir perfil\r\n      await permissionService.atribuirPerfilUsuario(usuario.id, perfilSelecionado)\r\n\r\n      // Limpar o cache de permissões para forçar uma atualização na próxima vez\r\n      clearPermissionCache()\r\n\r\n      // Se o usuário estiver atualizando seu próprio perfil, atualizar as permissões\r\n      const userStr = localStorage.getItem(\"user\")\r\n      if (userStr) {\r\n        const currentUser = JSON.parse(userStr)\r\n        if (currentUser.id === usuario.id) {\r\n          await refreshPermissions()\r\n        }\r\n      }\r\n\r\n      setSucesso(`Perfil ${perfilSelecionado} atribuído com sucesso ao usuário ${usuario.nome}.`)\r\n\r\n      toast({\r\n        title: \"Sucesso\",\r\n        description: \"Perfil atualizado com sucesso.\",\r\n      })\r\n\r\n      // Atualizar os dados do usuário para mostrar o novo perfil\r\n      await carregarUsuario()\r\n\r\n      // Voltar para a lista de usuários após 2 segundos\r\n      setTimeout(() => {\r\n        router.push(\"/usuarios\")\r\n      }, 2000)\r\n    } catch (error: any) {\r\n      const standardError = errorService.handleError(error, \"Erro ao salvar perfil\")\r\n      setErro(standardError.details || \"Erro ao salvar o perfil do usuário\")\r\n    } finally {\r\n      setSalvando(false)\r\n    }\r\n  }\r\n\r\n  const handleAssignProfile = async (profileId: string) => {\r\n    try {\r\n      setFeedback(null)\r\n      setSalvando(true)\r\n\r\n      // Usar o método correto do permissionService\r\n      await permissionService.atribuirPerfilUsuario(userId, profileId)\r\n\r\n      // Limpar o cache de permissões após atribuir um novo perfil\r\n      clearPermissionCache()\r\n\r\n      setFeedback({\r\n        type: \"success\",\r\n        message: \"Perfil atribuído com sucesso!\",\r\n      })\r\n\r\n      // Recarregar os dados do usuário\r\n      await carregarUsuario()\r\n    } catch (error) {\r\n      const standardError = errorService.handleError(error, \"Erro ao atribuir perfil\")\r\n      setFeedback({\r\n        type: \"error\",\r\n        message: standardError.details || \"Erro ao atribuir perfil ao usuário\",\r\n      })\r\n    } finally {\r\n      setSalvando(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-6\">\r\n      <div className=\"flex items-center mb-6\">\r\n        <BackButton />\r\n        <h1 className=\"text-2xl font-bold ml-4\">Gerenciar Perfil do Usuário</h1>\r\n      </div>\r\n\r\n      {feedback && <FeedbackMessage type={feedback.type} message={feedback.message} className=\"mb-4\" />}\r\n\r\n      {erro && <FeedbackMessage type=\"error\" message={erro} className=\"mb-4\" />}\r\n      {sucesso && <FeedbackMessage type=\"success\" message={sucesso} className=\"mb-4\" />}\r\n\r\n      {!usuario && !carregando && (\r\n        <Card className=\"mb-4\">\r\n          <CardHeader>\r\n            <CardTitle>Carregar Dados do Usuário</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <p className=\"mb-4\">\r\n              ID do usuário: <strong>{userId || \"Não especificado\"}</strong>\r\n            </p>\r\n            <Button onClick={carregarUsuario} disabled={carregando} className=\"w-full md:w-auto\">\r\n              {carregando ? (\r\n                <>\r\n                  <LoadingSpinner size=\"sm\" />\r\n                  <span className=\"ml-2\">Carregando...</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <RefreshCw className=\"mr-2 h-4 w-4\" />\r\n                  Carregar Dados do Usuário\r\n                </>\r\n              )}\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {usuario && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>{usuario.nome}</CardTitle>\r\n            <p className=\"text-sm text-gray-500\">\r\n              {usuario.username} | {usuario.email} | {usuario.cargo}\r\n            </p>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <p className=\"text-sm font-medium mb-2\">\r\n                  Perfil atual: <span className=\"font-bold\">{usuario.perfil || \"Não definido\"}</span>\r\n                </p>\r\n                <Select value={perfilSelecionado} onValueChange={setPerfilSelecionado}>\r\n                  <SelectTrigger className=\"w-full md:w-[300px]\">\r\n                    <SelectValue placeholder=\"Selecione um perfil\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"ADMINISTRADOR\">Administrador</SelectItem>\r\n                    <SelectItem value=\"GERENTE\">Gerente</SelectItem>\r\n                    <SelectItem value=\"VENDEDOR\">Vendedor</SelectItem>\r\n                    <SelectItem value=\"OPERADOR\">Operador</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div>\r\n                <p className=\"text-xs text-gray-500 mt-2\">\r\n                  Ao salvar o perfil, as permissões padrão serão atribuídas automaticamente pelo sistema.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex gap-2 pt-4\">\r\n                <Button onClick={handleSalvarPerfil} disabled={salvando || perfilSelecionado === usuario.perfil}>\r\n                  {salvando ? <LoadingSpinner size=\"sm\" /> : null}\r\n                  <span className=\"ml-2\">{salvando ? \"Salvando...\" : \"Salvar Perfil\"}</span>\r\n                </Button>\r\n                <Button variant=\"outline\" onClick={() => router.push(\"/usuarios\")}>\r\n                  Voltar para Lista\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {carregando && (\r\n        <div className=\"flex justify-center items-center py-8\">\r\n          <LoadingSpinner size=\"lg\" text=\"Carregando dados do usuário...\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}