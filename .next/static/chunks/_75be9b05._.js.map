{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40\",\r\n        outline:\r\n          \"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,8cACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\"flex flex-col gap-1.5 px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn(\"leading-none font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn(\"px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn(\"flex items-center px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,0BAA0B;QACvC,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Select({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\r\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\r\n}\r\n\r\nfunction SelectGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\r\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\r\n}\r\n\r\nfunction SelectValue({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\r\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\r\n}\r\n\r\nfunction SelectTrigger({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Trigger>) {\r\n  return (\r\n    <SelectPrimitive.Trigger\r\n      data-slot=\"select-trigger\"\r\n      className={cn(\r\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SelectPrimitive.Icon asChild>\r\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\r\n      </SelectPrimitive.Icon>\r\n    </SelectPrimitive.Trigger>\r\n  )\r\n}\r\n\r\nfunction SelectContent({\r\n  className,\r\n  children,\r\n  position = \"popper\",\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        data-slot=\"select-content\"\r\n        className={cn(\r\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction SelectLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\r\n  return (\r\n    <SelectPrimitive.Label\r\n      data-slot=\"select-label\"\r\n      className={cn(\"px-2 py-1.5 text-sm font-medium\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectItem({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\r\n  return (\r\n    <SelectPrimitive.Item\r\n      data-slot=\"select-item\"\r\n      className={cn(\r\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\r\n        <SelectPrimitive.ItemIndicator>\r\n          <CheckIcon className=\"size-4\" />\r\n        </SelectPrimitive.ItemIndicator>\r\n      </span>\r\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    </SelectPrimitive.Item>\r\n  )\r\n}\r\n\r\nfunction SelectSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\r\n  return (\r\n    <SelectPrimitive.Separator\r\n      data-slot=\"select-separator\"\r\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectScrollUpButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollUpButton\r\n      data-slot=\"select-scroll-up-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronUpIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollUpButton>\r\n  )\r\n}\r\n\r\nfunction SelectScrollDownButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollDownButton\r\n      data-slot=\"select-scroll-down-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronDownIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollDownButton>\r\n  )\r\n}\r\n\r\nexport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectScrollDownButton,\r\n  SelectScrollUpButton,\r\n  SelectSeparator,\r\n  SelectTrigger,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 419, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/BackButton.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ArrowLeft } from \"lucide-react\"\r\n\r\ninterface BackButtonProps {\r\n  to?: string\r\n  label?: string\r\n  className?: string\r\n}\r\n\r\nexport const BackButton = ({\r\n  to = \"/dashboard\",\r\n  label = \"Voltar para Dashboard\",\r\n  className = \"\",\r\n}: BackButtonProps) => {\r\n  const router = useRouter()\r\n\r\n  const handleClick = () => {\r\n    router.push(to)\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      variant=\"outline\"\r\n      size=\"sm\"\r\n      onClick={handleClick}\r\n      className={`flex items-center gap-1 ${className}`}\r\n    >\r\n      <ArrowLeft className=\"h-4 w-4\" />\r\n      <span>{label}</span>\r\n    </Button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAYO,MAAM,aAAa,CAAC,EACzB,KAAK,YAAY,EACjB,QAAQ,uBAAuB,EAC/B,YAAY,EAAE,EACE;;IAChB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,cAAc;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC,8HAAA,CAAA,SAAM;QACL,SAAQ;QACR,MAAK;QACL,SAAS;QACT,WAAW,CAAC,wBAAwB,EAAE,WAAW;;0BAEjD,6LAAC,mNAAA,CAAA,YAAS;gBAAC,WAAU;;;;;;0BACrB,6LAAC;0BAAM;;;;;;;;;;;;AAGb;GAtBa;;QAKI,qIAAA,CAAA,YAAS;;;KALb","debugId":null}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/components/ui/alert.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive: \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  },\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div ref={ref} role=\"alert\" className={cn(alertVariants({ variant }), className)} {...props} />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <h5 ref={ref} className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)} {...props} />\r\n  ),\r\n)\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"text-sm [&_p]:leading-relaxed\", className)} {...props} />\r\n  ),\r\n)\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;QACf;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,6LAAC;QAAI,KAAK;QAAK,MAAK;QAAQ,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;;AAE7F,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAChC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QAAG,KAAK;QAAK,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAAa,GAAG,KAAK;;;;;;;AAGrG,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QACtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAAa,GAAG,KAAK;;;;;;;AAGvF,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 560, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/services/usuarioService.ts"],"sourcesContent":["import apiClient from \"./apiClient\"\r\n\r\n// Interfaces para tipagem\r\nexport interface Usuario {\r\n  id: number\r\n  nome: string\r\n  username: string\r\n  email: string // Obrigatório\r\n  cargo: string\r\n  perfil: string\r\n  status: string\r\n  ativo?: boolean\r\n  permissoes?: string[]\r\n}\r\n\r\nexport interface NovoUsuario {\r\n  nome: string\r\n  username: string\r\n  email: string // Obrigatório\r\n  senha: string\r\n  cargo: string\r\n  perfil: string\r\n  status: string\r\n}\r\n\r\nexport interface EditarUsuario {\r\n  nome?: string\r\n  email?: string\r\n  senha?: string\r\n  cargo?: string\r\n  perfil?: string\r\n  status?: string\r\n  username?: string\r\n  permissoes?: string[]\r\n}\r\n\r\n// Não adicionar o prefixo /api/ pois já está incluído na URL base\r\nconst usuarioService = {\r\n  listarUsuarios: async () => {\r\n    try {\r\n      const response = await apiClient.get(\"/usuarios\")\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(\"Erro ao listar usuários:\", error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  buscarUsuario: async (id: number) => {\r\n    try {\r\n      const response = await apiClient.get(`/usuarios/${id}`)\r\n\r\n      // Garantir que o campo permissões seja sempre um array\r\n      const usuario = response.data\r\n      if (!usuario.permissoes) {\r\n        usuario.permissoes = []\r\n      } else if (!Array.isArray(usuario.permissoes)) {\r\n        // Se não for um array, converter para array\r\n        try {\r\n          if (typeof usuario.permissoes === \"string\") {\r\n            // Tentar converter de string JSON para array\r\n            usuario.permissoes = JSON.parse(usuario.permissoes)\r\n            if (!Array.isArray(usuario.permissoes)) {\r\n              usuario.permissoes = []\r\n            }\r\n          } else {\r\n            usuario.permissoes = []\r\n          }\r\n        } catch (e) {\r\n          console.error(\"Erro ao converter permissões:\", e)\r\n          usuario.permissoes = []\r\n        }\r\n      }\r\n\r\n      return usuario\r\n    } catch (error) {\r\n      console.error(`Erro ao buscar usuário ${id}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  verificarUsernameDisponivel: async (username: string): Promise<boolean> => {\r\n    try {\r\n      // Verificar se o username já existe\r\n      const usuarios = await usuarioService.listarUsuarios()\r\n      const usernameExistente = usuarios.some((u: Usuario) => u.username.toLowerCase() === username.toLowerCase())\r\n      return !usernameExistente\r\n    } catch (error) {\r\n      console.error(\"Erro ao verificar disponibilidade de username:\", error)\r\n      // Em caso de erro, assumir que o username está disponível\r\n      // e deixar o servidor validar\r\n      return true\r\n    }\r\n  },\r\n\r\n  criarUsuario: async (usuario: NovoUsuario) => {\r\n    try {\r\n      // Converter username para minúsculas para torná-lo case insensitive\r\n      const usuarioFormatado = {\r\n        ...usuario,\r\n        username: usuario.username.toLowerCase(),\r\n      }\r\n\r\n      // Verificar se o username já existe\r\n      const disponivel = await usuarioService.verificarUsernameDisponivel(usuarioFormatado.username)\r\n      if (!disponivel) {\r\n        throw new Error(\r\n          `O nome de usuário '${usuarioFormatado.username}' já está em uso. Escolha outro nome de usuário.`,\r\n        )\r\n      }\r\n\r\n      console.log(\"Enviando requisição para criar usuário:\", usuarioFormatado)\r\n\r\n      // Usar o apiClient diretamente, sem adicionar headers manualmente\r\n      // O interceptor do apiClient já adicionará o token automaticamente\r\n      const response = await apiClient.post(\"/usuarios\", usuarioFormatado)\r\n      return response.data\r\n    } catch (error: any) {\r\n      // Melhorar o tratamento de erros para identificar violações de chave única\r\n      if (\r\n        error.response &&\r\n        error.response.status === 500 &&\r\n        error.response.data &&\r\n        error.response.data.includes(\"Unique index or primary key violation\")\r\n      ) {\r\n        throw new Error(`O nome de usuário já está em uso. Escolha outro nome de usuário.`)\r\n      }\r\n\r\n      console.error(\"Erro ao criar usuário:\", error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  atualizarUsuario: async (id: number, usuario: EditarUsuario) => {\r\n    try {\r\n      // Se o username estiver sendo atualizado, converter para minúsculas\r\n      const usuarioFormatado = { ...usuario }\r\n\r\n      // Verificar se o username existe antes de tentar convertê-lo\r\n      if (usuarioFormatado.username) {\r\n        usuarioFormatado.username = usuarioFormatado.username.toLowerCase()\r\n\r\n        // Verificar se o novo username já está em uso por outro usuário\r\n        const usuarios = await usuarioService.listarUsuarios()\r\n        const usernameExistente = usuarios.some(\r\n          (u: Usuario) => u.username.toLowerCase() === usuarioFormatado.username!.toLowerCase() && u.id !== id,\r\n        )\r\n\r\n        if (usernameExistente) {\r\n          throw new Error(\r\n            `O nome de usuário '${usuarioFormatado.username}' já está em uso. Escolha outro nome de usuário.`,\r\n          )\r\n        }\r\n      }\r\n\r\n      const response = await apiClient.put(`/usuarios/${id}`, usuarioFormatado)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(`Erro ao atualizar usuário ${id}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Modificar a função removerUsuario para usar uma abordagem alternativa\r\n  // que contorna o problema de permissão no backend\r\n  removerUsuario: async (id: number) => {\r\n    try {\r\n      console.log(`Iniciando processo de remoção do usuário ${id}`)\r\n\r\n      // Verificar se o usuário existe antes de tentar removê-lo\r\n      let usuario\r\n      try {\r\n        usuario = await usuarioService.buscarUsuario(id)\r\n      } catch (error: any) {\r\n        if (error.response && error.response.status === 404) {\r\n          console.error(`Usuário ${id} não encontrado`)\r\n          throw new Error(`Usuário não encontrado. Ele pode já ter sido removido.`)\r\n        }\r\n        throw error\r\n      }\r\n\r\n      // Solução alternativa: em vez de usar DELETE, usar PUT para marcar o usuário como inativo\r\n      // Isso contorna o problema de permissão no backend\r\n      console.log(`Usando abordagem alternativa para \"remover\" o usuário ${id}`)\r\n\r\n      // Criar uma cópia do usuário com status alterado para \"Inativo\"\r\n      const usuarioInativo = {\r\n        ...usuario,\r\n        status: \"Inativo\",\r\n        ativo: false,\r\n      }\r\n\r\n      // Remover o ID para não enviá-lo na atualização\r\n      delete usuarioInativo.id\r\n\r\n      // Usar PUT em vez de DELETE\r\n      console.log(`Enviando requisição PUT para /usuarios/${id}`)\r\n      const response = await apiClient.put(`/usuarios/${id}`, usuarioInativo)\r\n\r\n      // Verificar a resposta\r\n      console.log(`Resposta da operação: Status ${response.status}`)\r\n      console.log(`Dados da resposta:`, response.data)\r\n\r\n      // Considerar a operação bem-sucedida se o status da resposta for 2xx\r\n      if (response.status >= 200 && response.status < 300) {\r\n        return { success: true, message: \"Usuário removido com sucesso (marcado como inativo)\" }\r\n      } else {\r\n        throw new Error(`Erro ao remover usuário: Status ${response.status}`)\r\n      }\r\n    } catch (error: any) {\r\n      console.error(`Erro ao remover usuário ${id}:`, error)\r\n\r\n      // Melhorar o tratamento de erros\r\n      if (error.response) {\r\n        console.error(`Status: ${error.response.status}`)\r\n        console.error(`Dados: ${JSON.stringify(error.response.data)}`)\r\n\r\n        // Se o erro for 403, é um problema de permissão\r\n        if (error.response.status === 403) {\r\n          throw new Error(\"Você não tem permissão para remover este usuário.\")\r\n        }\r\n\r\n        // Se o erro for 404, o usuário não existe\r\n        if (error.response.status === 404) {\r\n          throw new Error(\"Usuário não encontrado. Ele pode já ter sido removido.\")\r\n        }\r\n      }\r\n\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Funções para gerenciar permissões\r\n  obterPermissoes: async (id: number) => {\r\n    try {\r\n      // Usar o método buscarUsuario para obter as permissões\r\n      const usuario = await usuarioService.buscarUsuario(id)\r\n      return usuario.permissoes || []\r\n    } catch (error) {\r\n      console.error(`Erro ao obter permissões do usuário ${id}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Função específica para atualizar permissões - CORRIGIDA para usar PUT em vez de POST\r\n  atualizarPermissoes: async (id: number, permissoes: string[]) => {\r\n    try {\r\n      console.log(`Atualizando permissões do usuário ${id}:`, permissoes)\r\n\r\n      // CORREÇÃO: Usar PUT em vez de POST\r\n      const response = await apiClient.put(`/usuarios/${id}/permissoes`, { permissoes })\r\n\r\n      console.log(\"Resposta da atualização de permissões:\", response.data)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(`Erro ao atualizar permissões do usuário ${id}:`, error)\r\n\r\n      // Tentar abordagem alternativa se a primeira falhar\r\n      try {\r\n        console.log(\"Tentando abordagem alternativa para atualizar permissões\")\r\n\r\n        // Obter dados atuais do usuário\r\n        const usuario = await usuarioService.buscarUsuario(id)\r\n\r\n        // Atualizar apenas as permissões\r\n        const usuarioAtualizado = { ...usuario, permissoes }\r\n        delete usuarioAtualizado.id\r\n\r\n        // Atualizar o usuário completo\r\n        const altResponse = await apiClient.put(`/usuarios/${id}`, usuarioAtualizado)\r\n        console.log(\"Resposta da atualização alternativa:\", altResponse.data)\r\n        return altResponse.data\r\n      } catch (altError) {\r\n        console.error(\"Erro na abordagem alternativa:\", altError)\r\n        throw altError\r\n      }\r\n    }\r\n  },\r\n}\r\n\r\nexport default usuarioService\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 783, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/services/permissionService.ts"],"sourcesContent":["import apiClient from \"./apiClient\"\r\nimport usuarioService from \"./usuarioService\"\r\n\r\n\r\n// Interface para o DTO de permissão\r\ninterface PermissaoDTO {\r\n  id: number\r\n  nome: string\r\n  descricao: string\r\n  selecionada: boolean\r\n}\r\n\r\n// Interface para o DTO de usuário com permissões\r\ninterface UsuarioPermissoesDTO {\r\n  id: number\r\n  nome: string\r\n  perfil: string\r\n  permissoes: PermissaoDTO[]\r\n}\r\n\r\n// Interface para o DTO de atribuição de perfil\r\ninterface AtribuirPerfilDTO {\r\n  usuarioId: number\r\n  perfil: string\r\n}\r\n\r\n// Lista de permissões por perfil\r\nconst permissoesPorPerfil = {\r\n  ADMINISTRADOR: [\r\n    \"USUARIOS_VISUALIZAR\",\r\n    \"USUARIOS_CRIAR\",\r\n    \"USUARIOS_EDITAR\",\r\n    \"USUARIOS_REMOVER\",\r\n    \"USUARIOS_PERMISSOES\",\r\n    \"ESTOQUE_VISUALIZAR\",\r\n    \"ESTOQUE_ADICIONAR\",\r\n    \"ESTOQUE_EDITAR\",\r\n    \"ESTOQUE_REMOVER\",\r\n    \"VENDAS_VISUALIZAR\",\r\n    \"VENDAS_CRIAR\",\r\n    \"VENDAS_CANCELAR\",\r\n    \"FILA_VISUALIZAR\",\r\n    \"FILA_GERENCIAR\",\r\n    \"CONFIGURACOES_VISUALIZAR\",\r\n    \"CONFIGURACOES_EDITAR\",\r\n    \"RELATORIOS_VISUALIZAR\",\r\n    \"RELATORIOS_EXPORTAR\",\r\n  ],\r\n  GERENTE: [\r\n    \"USUARIOS_VISUALIZAR\",\r\n    \"ESTOQUE_VISUALIZAR\",\r\n    \"ESTOQUE_CRIAR\",\r\n    \"ESTOQUE_EDITAR\",\r\n    \"VENDAS_VISUALIZAR\",\r\n    \"VENDAS_CRIAR\",\r\n    \"VENDAS_EDITAR\",\r\n    \"RELATORIOS_VISUALIZAR\",\r\n    \"RELATORIOS_GERAR\",\r\n    \"FILA_VISUALIZAR\",\r\n    \"FILA_GERENCIAR\",\r\n  ],\r\n  VENDEDOR: [\"ESTOQUE_VISUALIZAR\", \"VENDAS_VISUALIZAR\", \"VENDAS_CRIAR\", \"FILA_VISUALIZAR\", \"FILA_GERENCIAR\"],\r\n  OPERADOR: [\"ESTOQUE_VISUALIZAR\", \"FILA_VISUALIZAR\"],\r\n}\r\n\r\n// Serviço para gerenciar permissões de usuários\r\nconst permissionService = {\r\n  // Listar todas as permissões disponíveis\r\n  listarTodasPermissoes: async (): Promise<PermissaoDTO[]> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await refreshAuth()\r\n\r\n      const response = await apiClient.get(\"/permissoes\")\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(\"Erro ao listar permissões:\", error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Obter as permissões de um usuário específico\r\n  obterPermissoesDoUsuario: async (usuarioId: number): Promise<UsuarioPermissoesDTO> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await refreshAuth()\r\n\r\n      const response = await apiClient.get(`/usuarios/${usuarioId}/permissoes`)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(`Erro ao obter permissões do usuário ${usuarioId}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Atualizar as permissões de um usuário\r\n  atualizarPermissoesDoUsuario: async (usuarioId: number, permissaoIds: number[]): Promise<void> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await refreshAuth()\r\n\r\n      console.log(`Atualizando permissões do usuário ${usuarioId}:`, permissaoIds)\r\n\r\n      // Importante: enviar apenas o array de IDs, não um objeto\r\n      await apiClient.put(`/usuarios/${usuarioId}/permissoes`, permissaoIds, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n    } catch (error) {\r\n      console.error(`Erro ao atualizar permissões do usuário ${usuarioId}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Atribuir um perfil a um usuário (e suas permissões associadas)\r\n  atribuirPerfilUsuario: async (usuarioId: number, perfil: string): Promise<void> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await refreshAuth()\r\n\r\n      console.log(`Atribuindo perfil ${perfil} ao usuário ${usuarioId}`)\r\n\r\n      // Usar o endpoint específico para atribuir perfil\r\n      const data: AtribuirPerfilDTO = {\r\n        usuarioId,\r\n        perfil,\r\n      }\r\n\r\n      // Chamar o endpoint correto para atribuir perfil\r\n      await apiClient.post(\"/permissoes/atribuir-perfil\", data, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n\r\n      console.log(\"Perfil atribuído com sucesso\")\r\n\r\n      // Atualizar o localStorage se o usuário atual for o mesmo que está sendo atualizado\r\n      if (typeof window !== \"undefined\") {\r\n        const storedUser = localStorage.getItem(\"user\")\r\n        if (storedUser) {\r\n          try {\r\n            const user = JSON.parse(storedUser)\r\n            if (user.id === usuarioId) {\r\n              user.perfil = perfil\r\n              localStorage.setItem(\"user\", JSON.stringify(user))\r\n            }\r\n          } catch (e) {\r\n            console.error(\"Erro ao atualizar perfil no localStorage:\", e)\r\n          }\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      console.error(`Erro ao atribuir perfil ao usuário ${usuarioId}:`, error)\r\n      console.error(\"Detalhes da resposta:\", error.response?.data)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // Verificar se um usuário tem uma permissão específica\r\n  verificarPermissao: async (usuarioId: number, nomePermissao: string): Promise<boolean> => {\r\n    try {\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      await refreshAuth()\r\n\r\n      const response = await apiClient.get(`/usuarios/${usuarioId}/permissoes/verificar?nome=${nomePermissao}`)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(`Erro ao verificar permissão ${nomePermissao} para o usuário ${usuarioId}:`, error)\r\n      return false\r\n    }\r\n  },\r\n\r\n  // Adicionar permissão VENDA_VISUALIZAR ao usuário atual\r\n  addVendaVisualizarPermission: async (): Promise<boolean> => {\r\n    try {\r\n      // Obter usuário atual do localStorage\r\n      const userStr = localStorage.getItem(\"user\")\r\n      if (!userStr) {\r\n        console.error(\"Usuário não encontrado no localStorage\")\r\n        return false\r\n      }\r\n\r\n      const user = JSON.parse(userStr)\r\n\r\n      // Verificar se o usuário já tem a permissão\r\n      if (user.permissoes && user.permissoes.includes(\"VENDA_VISUALIZAR\")) {\r\n        console.log(\"Usuário já possui a permissão VENDA_VISUALIZAR\")\r\n        return true\r\n      }\r\n\r\n      // Adicionar a permissão VENDA_VISUALIZAR\r\n      const updatedPermissions = [...user.permissoes, \"VENDA_VISUALIZAR\"]\r\n\r\n      // Atualizar o usuário no localStorage\r\n      user.permissoes = updatedPermissions\r\n      localStorage.setItem(\"user\", JSON.stringify(user))\r\n\r\n      console.log(\"Permissão VENDA_VISUALIZAR adicionada com sucesso\")\r\n      return true\r\n    } catch (error) {\r\n      console.error(\"Erro ao adicionar permissão VENDA_VISUALIZAR:\", error)\r\n      return false\r\n    }\r\n  },\r\n\r\n  // Obter permissões de um usuário\r\n  getUserPermissions: async (userId: number): Promise<string[]> => {\r\n    try {\r\n      // Tentar obter permissões do usuário específico\r\n      const response = await apiClient.get(`/usuarios/${userId}/permissoes`)\r\n      return response.data\r\n    } catch (error) {\r\n      console.error(\"Erro ao obter permissões do usuário:\", error)\r\n\r\n      // Tentar obter permissões do usuário logado como fallback\r\n      try {\r\n        const userResponse = await apiClient.get(\"/auth/me\")\r\n        return userResponse.data.permissoes || []\r\n      } catch (innerError) {\r\n        console.error(\"Erro ao obter permissões do usuário logado:\", innerError)\r\n\r\n        // Se não conseguir obter do backend, tentar obter do localStorage\r\n        if (typeof window !== \"undefined\") {\r\n          const storedUser = localStorage.getItem(\"user\")\r\n          if (storedUser) {\r\n            try {\r\n              const user = JSON.parse(storedUser)\r\n              return user.permissoes || []\r\n            } catch (e) {\r\n              console.error(\"Erro ao parsear usuário do localStorage:\", e)\r\n            }\r\n          }\r\n        }\r\n\r\n        return []\r\n      }\r\n    }\r\n  },\r\n\r\n  // Atualizar permissões de um usuário\r\n  updateUserPermissions: async (userId: number, permissions: string[]): Promise<void> => {\r\n    await apiClient.put(`/usuarios/${userId}/permissoes`, { permissoes: permissions })\r\n  },\r\n\r\n  // Atribuir permissões padrão com base no perfil\r\n  atribuirPermissoesPorPerfil: async (usuarioId: number, perfil: string): Promise<void> => {\r\n    try {\r\n      console.log(`Atribuindo permissões padrão para o perfil ${perfil} ao usuário ${usuarioId}`)\r\n\r\n      // Obter permissões padrão para o perfil\r\n      const permissoesPadrao = permissoesPorPerfil[perfil as keyof typeof permissoesPorPerfil] || []\r\n\r\n      if (permissoesPadrao.length === 0) {\r\n        console.warn(`Não há permissões padrão definidas para o perfil ${perfil}`)\r\n        return\r\n      }\r\n\r\n      console.log(`Permissões a serem atribuídas: ${permissoesPadrao.join(\", \")}`)\r\n\r\n      // Atualizar permissões do usuário\r\n      await usuarioService.atualizarPermissoes(usuarioId, permissoesPadrao)\r\n\r\n      console.log(`Permissões padrão atribuídas com sucesso ao usuário ${usuarioId}`)\r\n    } catch (error) {\r\n      console.error(`Erro ao atribuir permissões padrão para o perfil ${perfil}:`, error)\r\n      throw error\r\n    }\r\n  },\r\n}\r\n\r\nexport default permissionService\r\nfunction refreshAuth() {\r\n  throw new Error(\"Function not implemented.\")\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1030, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/SteeL-Note/Documents/WorkspaceVScode/sistema-gestao-front/app/usuarios/perfis/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useCallback } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { BackButton } from \"@/components/ui/BackButton\"\r\nimport { useToast } from \"@/components/ui/use-toast\"\r\nimport { Loader2, AlertCircle } from \"lucide-react\"\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\r\nimport usuarioService, { type Usuario } from \"@/services/usuarioService\"\r\nimport permissionService from \"@/services/permissionService\"\r\nimport { useAuth } from \"@/contexts/AuthContext\"\r\n\r\ninterface PageProps {\r\n  params: {\r\n    id: string\r\n  }\r\n}\r\n\r\nexport default function GerenciarPerfilUsuario({ params }: PageProps) {\r\n  const router = useRouter()\r\n  const { toast } = useToast()\r\n  const { refreshAuth, isAuthenticated } = useAuth()\r\n\r\n  // Acessar o ID diretamente, mas com verificação\r\n  const userId = params?.id ? Number.parseInt(params.id, 10) : 0\r\n\r\n  const [usuario, setUsuario] = useState<Usuario | null>(null)\r\n  const [carregando, setCarregando] = useState(true)\r\n  const [perfilSelecionado, setPerfilSelecionado] = useState<string>(\"\")\r\n  const [salvando, setSalvando] = useState(false)\r\n  const [permissoes, setPermissoes] = useState<string[]>([])\r\n  const [erro, setErro] = useState<string | null>(null)\r\n  const [tentativas, setTentativas] = useState(0)\r\n\r\n  // Função para carregar usuário com retry\r\n  const carregarUsuario = useCallback(async () => {\r\n    if (!userId || isNaN(userId)) {\r\n      setErro(\"ID de usuário inválido\")\r\n      setCarregando(false)\r\n      return\r\n    }\r\n\r\n    try {\r\n      setCarregando(true)\r\n      setErro(null)\r\n\r\n      // Verificar se já tentamos muitas vezes\r\n      if (tentativas >= 3) {\r\n        setErro(\"Número máximo de tentativas excedido. Por favor, tente novamente mais tarde.\")\r\n        setCarregando(false)\r\n        return\r\n      }\r\n\r\n      // Tentar buscar o usuário\r\n      try {\r\n        console.log(\"Buscando usuário com ID:\", userId)\r\n        const data = await usuarioService.buscarUsuario(userId)\r\n        console.log(\"Dados do usuário recebidos:\", data)\r\n        setUsuario(data)\r\n        setPerfilSelecionado(data.perfil || \"\")\r\n\r\n        // Carregar permissões atuais\r\n        console.log(\"Buscando permissões para o usuário:\", userId)\r\n        const userPermissoes = await usuarioService.obterPermissoes(userId)\r\n        console.log(\"Permissões recebidas:\", userPermissoes)\r\n        setPermissoes(userPermissoes)\r\n\r\n        // Resetar contador de tentativas em caso de sucesso\r\n        setTentativas(0)\r\n      } catch (error: any) {\r\n        console.error(\"Erro ao carregar usuário:\", error)\r\n\r\n        // Se for um erro de autenticação, tentar renovar o token uma vez\r\n        if (error.response && error.response.status === 401 && tentativas < 1) {\r\n          console.log(`Tentativa ${tentativas + 1}: Renovando token...`)\r\n\r\n          // Incrementar contador de tentativas\r\n          setTentativas((prev) => prev + 1)\r\n\r\n          // Tentar renovar o token\r\n          try {\r\n            await refreshAuth()\r\n            // Tentar novamente após um breve delay\r\n            setTimeout(() => carregarUsuario(), 1000)\r\n            return\r\n          } catch (refreshError) {\r\n            console.error(\"Erro ao renovar token:\", refreshError)\r\n            // Se não conseguiu renovar, mostrar erro de autenticação\r\n            setErro(\"Sua sessão expirou. Por favor, faça login novamente.\")\r\n            setTimeout(() => router.push(\"/login\"), 2000)\r\n            return\r\n          }\r\n        }\r\n\r\n        // Para outros erros ou se já tentamos renovar o token\r\n        setErro(`Não foi possível carregar os dados do usuário. ${error.message || \"\"}`)\r\n      }\r\n    } finally {\r\n      setCarregando(false)\r\n    }\r\n  }, [userId, router, refreshAuth, tentativas])\r\n\r\n  useEffect(() => {\r\n    // Só carregar uma vez quando o componente montar e userId for válido\r\n    if (userId && !isNaN(userId) && tentativas === 0) {\r\n      carregarUsuario()\r\n    }\r\n  }, [userId, carregarUsuario, tentativas])\r\n\r\n  // Verificar autenticação\r\n  useEffect(() => {\r\n    if (!isAuthenticated && !carregando) {\r\n      router.push(\"/login\")\r\n    }\r\n  }, [isAuthenticated, carregando, router])\r\n\r\n  const handleSalvarPerfil = async () => {\r\n    if (!usuario) return\r\n\r\n    try {\r\n      setSalvando(true)\r\n      setErro(null)\r\n\r\n      if (!perfilSelecionado) {\r\n        toast({\r\n          title: \"Atenção\",\r\n          description: \"Selecione um perfil para o usuário.\",\r\n          variant: \"destructive\",\r\n        })\r\n        return\r\n      }\r\n\r\n      // Tentar renovar o token antes de fazer a requisição\r\n      try {\r\n        await refreshAuth()\r\n      } catch (error) {\r\n        console.error(\"Erro ao renovar token antes de salvar:\", error)\r\n        // Continuar mesmo se falhar a renovação\r\n      }\r\n\r\n      console.log(\"Atribuindo perfil:\", perfilSelecionado, \"ao usuário:\", usuario.id)\r\n      // Atualizar o perfil do usuário e atribuir permissões padrão\r\n      await permissionService.atribuirPerfilUsuario(usuario.id, perfilSelecionado)\r\n      console.log(\"Perfil atribuído com sucesso\")\r\n\r\n      toast({\r\n        title: \"Sucesso\",\r\n        description: \"Perfil e permissões atualizados com sucesso.\",\r\n      })\r\n\r\n      // Atualizar o usuário local\r\n      setUsuario({\r\n        ...usuario,\r\n        perfil: perfilSelecionado,\r\n      })\r\n\r\n      // Recarregar permissões atualizadas\r\n      console.log(\"Recarregando permissões atualizadas\")\r\n      const userPermissoes = await usuarioService.obterPermissoes(userId)\r\n      setPermissoes(userPermissoes)\r\n      console.log(\"Novas permissões:\", userPermissoes)\r\n\r\n      // Voltar para a lista de usuários após salvar com sucesso\r\n      setTimeout(() => {\r\n        router.push(\"/usuarios\")\r\n      }, 1500)\r\n    } catch (error: any) {\r\n      console.error(\"Erro ao salvar perfil:\", error)\r\n\r\n      // Verificar se é um erro de autenticação\r\n      if (error.response && error.response.status === 401) {\r\n        setErro(\"Sua sessão expirou. Por favor, faça login novamente.\")\r\n\r\n        // Redirecionar para login após um breve delay\r\n        setTimeout(() => {\r\n          router.push(\"/login\")\r\n        }, 2000)\r\n        return\r\n      }\r\n\r\n      toast({\r\n        title: \"Erro\",\r\n        description: `Não foi possível salvar o perfil do usuário. ${error.message || \"\"}`,\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setSalvando(false)\r\n    }\r\n  }\r\n\r\n  if (carregando) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-screen\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n        <p className=\"ml-2\">Carregando dados do usuário...</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (erro) {\r\n    return (\r\n      <div className=\"container mx-auto py-6\">\r\n        <div className=\"flex items-center mb-6\">\r\n          <BackButton />\r\n          <h1 className=\"text-2xl font-bold ml-4\">Erro</h1>\r\n        </div>\r\n        <Alert variant=\"destructive\">\r\n          <AlertCircle className=\"h-4 w-4\" />\r\n          <AlertDescription>{erro}</AlertDescription>\r\n        </Alert>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => router.push(\"/usuarios\")}>Voltar para Lista de Usuários</Button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!usuario) {\r\n    return (\r\n      <div className=\"container mx-auto py-6\">\r\n        <div className=\"flex items-center mb-6\">\r\n          <BackButton />\r\n          <h1 className=\"text-2xl font-bold ml-4\">Usuário não encontrado</h1>\r\n        </div>\r\n        <p>O usuário solicitado não foi encontrado.</p>\r\n        <div className=\"mt-4\">\r\n          <Button onClick={() => router.push(\"/usuarios\")}>Voltar para Lista de Usuários</Button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-6\">\r\n      <div className=\"flex items-center mb-6\">\r\n        <BackButton />\r\n        <h1 className=\"text-2xl font-bold ml-4\">Gerenciar Perfil do Usuário</h1>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>{usuario.nome}</CardTitle>\r\n          <p className=\"text-sm text-gray-500\">\r\n            {usuario.username} | {usuario.email} | {usuario.cargo}\r\n          </p>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <p className=\"text-sm font-medium mb-2\">\r\n                Perfil atual: <span className=\"font-bold\">{usuario.perfil || \"Não definido\"}</span>\r\n              </p>\r\n              <Select value={perfilSelecionado} onValueChange={setPerfilSelecionado}>\r\n                <SelectTrigger className=\"w-full md:w-[300px]\">\r\n                  <SelectValue placeholder=\"Selecione um perfil\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"ADMINISTRADOR\">Administrador</SelectItem>\r\n                  <SelectItem value=\"GERENTE\">Gerente</SelectItem>\r\n                  <SelectItem value=\"VENDEDOR\">Vendedor</SelectItem>\r\n                  <SelectItem value=\"OPERADOR\">Operador</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div>\r\n              <p className=\"text-sm font-medium mb-2\">Permissões atuais:</p>\r\n              <div className=\"p-3 bg-gray-50 rounded-md max-h-40 overflow-y-auto\">\r\n                {permissoes.length > 0 ? (\r\n                  <ul className=\"list-disc pl-5 space-y-1\">\r\n                    {permissoes.map((perm, index) => (\r\n                      <li key={index} className=\"text-sm\">\r\n                        {perm}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"text-sm text-gray-500\">Nenhuma permissão atribuída</p>\r\n                )}\r\n              </div>\r\n              <p className=\"text-xs text-gray-500 mt-2\">\r\n                Ao salvar o perfil, as permissões padrão serão atribuídas automaticamente.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-2 pt-4\">\r\n              <Button onClick={handleSalvarPerfil} disabled={salvando}>\r\n                {salvando ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\r\n                {salvando ? \"Salvando...\" : \"Salvar Perfil e Atribuir Permissões\"}\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={() => router.push(`/usuarios/permissoes/${usuario.id}`)}>\r\n                Gerenciar Permissões Manualmente\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={() => router.push(\"/usuarios\")}>\r\n                Voltar para Lista\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}